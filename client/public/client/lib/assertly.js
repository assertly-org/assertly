!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))((function(r,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function l(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,l)}u((o=o.apply(e,n||[])).next())}))},i=this&&this.__generator||function(e,n){var t,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=n.call(e,c)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var l=t(1),u=c(t(2)),a=function(){var e=this;this.eventsToRecord=["click","change"],this.componentEventCache=[],this.previousComponent=null,this.previousMsg=null,this.start=function(){e.eventRecorder.start()},this.stop=function(){e.eventRecorder.stop()},this.clearEventCache=function(){e.componentEventCache=[]},this.reconcileEventCache=function(n){(n.target?l.findReactElement(n.target):null)!==e.previousComponent&&(e.componentEventCache.forEach((function(e){console.log("in the reconcile")})),e.clearEventCache())},this.removeMenusByClassname=function(e){var n=Array.from(document.getElementsByClassName(e));null==n||n.map((function(e){return e.remove()}))},this.removeSingleMenu=function(n){return r(e,void 0,void 0,(function(){var e;return i(this,(function(t){return null==(e=document.getElementById(n))||e.remove(),[2]}))}))},this.setupMenuDiv=function(e){var n="componentMenu"+(new Date).getTime(),t=document.createElement("DIV");return t.setAttribute("id",n),t.setAttribute("class","componentMenu"),document.body.appendChild(t),t.style.position="absolute",t.style.left=e.x+"px",t.style.top=e.y+"px",t.style.zIndex="9999999999999",n},this.appendButton=function(e,n,t){var o,r;void 0===t&&(t=void 0);var i=document.createElement("BUTTON");i.style.width="150px",i.innerHTML=n,t&&t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor),null===(o=document.getElementById(e))||void 0===o||o.appendChild(i);var c=document.createElement("br");return null===(r=document.getElementById(e))||void 0===r||r.appendChild(c),i},this.createPopupMenu=function(n,t){var o;e.removeMenusByClassname("componentMenu");var c=e.setupMenuDiv(t);null===(o=null==n?void 0:n.componentInfo)||void 0===o||o.map((function(t){var o,l;console.log("button val: ",t);var u=document.createElement("BUTTON");if(u.style.width="150px",u.innerHTML=null==t?void 0:t.componentName,u.innerHTML){u.addEventListener("click",(function(t){return r(e,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.componentMenuClick(t,c,n)];case 1:return[2,e.sent()]}}))}))})),null===(o=document.getElementById(c))||void 0===o||o.appendChild(u);var a=document.createElement("br");null===(l=document.getElementById(c))||void 0===l||l.appendChild(a)}})),e.appendButton(c,"Cancel").addEventListener("click",(function(){return r(e,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.removeSingleMenu(c)];case 1:return[2,e.sent()]}}))}))}))},this.createExistingTestMenu=function(n,t){return r(e,void 0,void 0,(function(){var e,o,c,l=this;return i(this,(function(u){return e=this.setupMenuDiv(n),null==(o=t.describeBlocks)||o.map((function(n){l.appendButton(e,n)})),c=this.appendButton(e,"Create New Test"),this.appendButton(e,"Cancel",{backgroundColor:"#df2a2a7a"}).addEventListener("click",(function(){return r(l,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,this.removeSingleMenu(e)];case 1:return[2,n.sent()]}}))}))})),[2,{newTestBtn:c,existingTestMenuID:e}]}))}))},this.componentMenuClick=function(n,t,c){return r(e,void 0,void 0,(function(){var e,l,u,a,s=this;return i(this,(function(d){switch(d.label){case 0:return[4,this.removeSingleMenu(t)];case 1:return d.sent(),e=null===(a=c.componentInfo)||void 0===a?void 0:a.reduce((function(e,t){var r;return t.componentName===(null===(r=n.target)||void 0===r?void 0:r.innerHTML)?o({},t):e}),null),null==n||n.stopPropagation(),[4,this.checkForExistingTest(null==e?void 0:e.filename)];case 2:return(l=d.sent()).describeBlocks?[4,this.createExistingTestMenu(n,l)]:[3,4];case 3:return(u=d.sent()).newTestBtn.addEventListener("click",(function(){return r(s,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,this.createNewTest(o(o({},c),{componentInfo:e,checkedEvent:l.checkedEvent}))];case 1:return n.sent(),[4,this.removeSingleMenu(u.existingTestMenuID)];case 2:return n.sent(),[2]}}))}))})),[3,6];case 4:return[4,this.createNewTest(o(o({},c),{componentInfo:e,checkedEvent:l.checkedEvent}))];case 5:d.sent(),d.label=6;case 6:return[2]}}))}))},this.getMessage=function(e,n){var t,r,i,c=n.target||n.srcElement,u=c,a=c,s=l.getComponentInfo(e,10,[]),d=null===(r=null===(t=null==s?void 0:s.slice(0))||void 0===t?void 0:t.reverse())||void 0===r?void 0:r.reduce((function(e,n){var t;return(null===(t=n.props)||void 0===t?void 0:t.onClick)?o({},n):e}),null);return{action:n.type,checked:(null===(i=null==n?void 0:n.target)||void 0===i?void 0:i.hasOwnProperty("checked"))?u.checked:null,coordinates:l.getCoordinates(n),href:a.href?a.href:null,keyCode:n.keyCode?n.keyCode:null,tagName:u.tagName,tagType:u.type,textContent:u.textContent||u.innerText,timestamp:(new Date).getTime(),value:u.value,writeTestLocation:"",componentInfo:s,clickHandlerComponent:d,checkedEvent:void 0}},this.recordEvent=function(n){var t,o,r=n.target,i=n;if(!(null===(o=null===(t=null==r?void 0:r.parentElement)||void 0===t?void 0:t.getAttribute("id"))||void 0===o?void 0:o.includes("componentMenu"))&&n.target)try{if(e.previousMsg&&("change"===n.type||"click"===n.type)&&e.previousMsg&&"click"===e.previousMsg.action&&(new Date).getTime()-e.previousMsg.timestamp<100)return void console.log("message not send due to time");var c=l.findReactElement(n.target),u=e.getMessage(c,n);console.log("reactComponent and message in RECORD_EVENT: ",c,u),localStorage.setItem("lastEvent",JSON.stringify(u)),e.previousMsg=u,e.previousComponent=c,(null==i?void 0:i.metaKey)&&e.createPopupMenu(u,i)}catch(e){console.error("Error recording event",e)}},this.createNewTest=function(n){return r(e,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=window.dataLayer[0].apiKey,console.log("message: ",n),e||(e=1),[4,fetch("//localhost:3020/api/accounts/"+e+"/events/",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:window.location.href,event:n,placeholder:null})})];case 1:return[2,t.sent().json()]}}))}))},this.checkForExistingTest=function(n){return r(e,void 0,void 0,(function(){var e,t,o;return i(this,(function(r){switch(r.label){case 0:return(e=window.dataLayer[0].apiKey)||(e=1),t=encodeURI(n),o="//localhost:3020/api/accounts/"+e+"/events/?filepath="+t,console.log("url hit: ",o,t),[4,fetch(o,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"}})];case 1:return[2,r.sent().json()]}}))}))},this.eventRecorder=new u.default({recordEvents:this.eventsToRecord,eventCallback:this.recordEvent,reconcileCallback:this.reconcileEventCache})};n.default=a,window.eventRecorder=new a,window.eventRecorder.start()},function(e,n,t){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};function r(e,n){var t;if(void 0===n&&(n={}),!e)return l(n),n;var i=e.pendingProps?o(o({},n),e.pendingProps):n;return delete i.children,(null===(t=null==e?void 0:e.type)||void 0===t?void 0:t.__proto__)&&["Component","PureComponent"].includes(e.type.__proto__.name)?(l(i),i):r(e._debugOwner,i)}function i(e){return e?e.elementType&&e.elementType.name?e.elementType.name:e.elementType&&e.elementType.displayName?e.elementType.displayName:e.type.displayName?e.type.displayName:e.type.name?e.type.name:i(e._debugOwner):null}Object.defineProperty(n,"__esModule",{value:!0}),n.functionStringify=n.findReactElement=n.findReactElementDURKA=n.getCoordinates=n.getComponentName=n.getComponentProps=n.getComponentInfo=void 0,n.getComponentInfo=function e(n,t,o){var c,l,u,a,s;if(console.log("getComponentInfo: ",n,o),!n||0===t)return o;if(null===(c=null==n?void 0:n._debugSource)||void 0===c?void 0:c.fileName){var d=r(null==n?void 0:n._debugOwner),v=i(null==n?void 0:n._debugOwner);return o.push({filename:null===(l=null==n?void 0:n._debugSource)||void 0===l?void 0:l.fileName,linenumber:null===(u=null==n?void 0:n._debugSource)||void 0===u?void 0:u.lineNumber,props:d,componentName:"Component"===v?null===(s=null===(a=null==n?void 0:n._debugSource)||void 0===a?void 0:a.fileName)||void 0===s?void 0:s.split("\\").pop().split("/").pop().split(".")[0]:v}),e(null==n?void 0:n._debugOwner,t-1,o)}return e(null==n?void 0:n._debugOwner,t-1,o)},n.getComponentProps=r,n.getComponentName=i;var c={mouseup:!0,mousedown:!0,mousemove:!0,mouseover:!0};function l(e){for(var n in e)if(e[n]&&"[object Function]"==={}.toString.call(e[n]))try{e[n]="[Function]"}catch(e){console.error("Error stringifying prop",e)}!function(e){for(var n=Object.keys(e),t=0,o=n;t<o.length;t++){var r=o[t];"[object Object]"!==Object.prototype.toString.call(e[r])||!e[r].hasOwnProperty("_owner")&&"inputRef"!==r&&"InputProps"!==r||delete e[r]}}(e)}n.getCoordinates=function(e){var n=e;return c[e.type]?{x:n.clientX,y:n.clientY}:null},n.findReactElementDURKA=function(e){var n=Object.keys(e).find((function(e){return e.startsWith("__reactInternalInstance$")})),t=n?e[n]:null;return null==t?null:t},n.findReactElement=function(e){var n=e;for(var t in n)if(t.startsWith("__reactInternalInstance$"))return n[t];return null},n.functionStringify=l},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){var n=this;this.recordEvents=[],this.reconcileEvents=["blur","focus","change"],this.addAllListeners=function(){n.recordEvents.forEach((function(e){window.addEventListener(e,n.eventCallback,!0)})),n.reconcileEvents.forEach((function(e){window.addEventListener(e,n.reconcileCallback,!0)}))},this.removeAllListeners=function(){n.recordEvents.forEach((function(e){window.removeEventListener(e,n.eventCallback,!0)})),n.reconcileEvents.forEach((function(e){window.removeEventListener(e,n.reconcileCallback,!0)}))},this.start=function(){window.recorderAddedControlListeners||(n.addAllListeners(),window.recorderAddedControlListeners=!0)},this.stop=function(){window.recorderAddedControlListeners&&(n.removeAllListeners(),window.recorderAddedControlListeners=!1)};var t=e.eventCallback,o=e.reconcileCallback,r=e.recordEvents,i=e.reconcileEvents,c=void 0===i?null:i;this.eventCallback=t,this.reconcileCallback=o,this.recordEvents=r,c&&(this.reconcileEvents=c)};n.default=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsaWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2V2ZW50LXJlY29yZGVyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZXZlbnRzVG9SZWNvcmQiLCJjb21wb25lbnRFdmVudENhY2hlIiwicHJldmlvdXNDb21wb25lbnQiLCJwcmV2aW91c01zZyIsInN0YXJ0IiwiZXZlbnRSZWNvcmRlciIsInN0b3AiLCJjbGVhckV2ZW50Q2FjaGUiLCJyZWNvbmNpbGVFdmVudENhY2hlIiwiZXZlbnQiLCJ0YXJnZXQiLCJmaW5kUmVhY3RFbGVtZW50IiwiZm9yRWFjaCIsIm1zZyIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmVNZW51c0J5Q2xhc3NuYW1lIiwiY2xhc3NuYW1lIiwicHJldmlvdXNNZW51cyIsIkFycmF5IiwiZnJvbSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIm1hcCIsInZhbCIsInJlbW92ZSIsInJlbW92ZVNpbmdsZU1lbnUiLCJlbElEIiwibWVudURpdiIsImdldEVsZW1lbnRCeUlkIiwic2V0dXBNZW51RGl2IiwibW91c2VFdmVudCIsImRpdklEIiwiRGF0ZSIsImdldFRpbWUiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYm9keSIsImFwcGVuZENoaWxkIiwic3R5bGUiLCJwb3NpdGlvbiIsImxlZnQiLCJ4IiwidG9wIiwieSIsInpJbmRleCIsImFwcGVuZEJ1dHRvbiIsImxhYmVsIiwic3R5bGVzIiwiYnRuIiwid2lkdGgiLCJpbm5lckhUTUwiLCJiYWNrZ3JvdW5kQ29sb3IiLCJiciIsImNyZWF0ZVBvcHVwTWVudSIsIm1lc3NhZ2UiLCJjb21wb25lbnRJbmZvIiwiY29tcG9uZW50TmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0aGlzIiwiY29tcG9uZW50TWVudUNsaWNrIiwiY3JlYXRlRXhpc3RpbmdUZXN0TWVudSIsImV4aXN0aW5nVGVzdFJlc3BvbnNlIiwiZXhpc3RpbmdUZXN0RGl2SUQiLCJkZXNjcmliZUJsb2NrcyIsIm5ld1Rlc3RCdG4iLCJleGlzdGluZ1Rlc3RNZW51SUQiLCJzZWxlY3RlZENvbXBvbmVudCIsInJlZHVjZSIsImFjYyIsImN1cnIiLCJzdG9wUHJvcGFnYXRpb24iLCJjaGVja0ZvckV4aXN0aW5nVGVzdCIsImZpbGVuYW1lIiwiY3JlYXRlTmV3VGVzdCIsImNoZWNrZWRFdmVudCIsImdldE1lc3NhZ2UiLCJyZWFjdENvbXBvbmVudCIsInNyY0VsZW1lbnQiLCJpbnB1dFRhcmdldCIsImxpbmtUYXJnZXQiLCJnZXRDb21wb25lbnRJbmZvIiwiY2xpY2tIYW5kbGVyIiwic2xpY2UiLCJyZXZlcnNlIiwiYWNjdW11bGF0b3IiLCJjdXJyZW50VmFsdWUiLCJwcm9wcyIsIm9uQ2xpY2siLCJhY3Rpb24iLCJ0eXBlIiwiY2hlY2tlZCIsImNvb3JkaW5hdGVzIiwiZ2V0Q29vcmRpbmF0ZXMiLCJocmVmIiwia2V5Q29kZSIsInRhZ05hbWUiLCJ0YWdUeXBlIiwidGV4dENvbnRlbnQiLCJpbm5lclRleHQiLCJ0aW1lc3RhbXAiLCJ3cml0ZVRlc3RMb2NhdGlvbiIsImNsaWNrSGFuZGxlckNvbXBvbmVudCIsInVuZGVmaW5lZCIsInJlY29yZEV2ZW50Iiwibm9kZVRhcmdldCIsInBhcmVudEVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJpbmNsdWRlcyIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwibWV0YUtleSIsImUiLCJlcnJvciIsImFjY291bnRJZCIsIndpbmRvdyIsImZldGNoIiwibWV0aG9kIiwiY2FjaGUiLCJjcmVkZW50aWFscyIsImhlYWRlcnMiLCJ1cmwiLCJsb2NhdGlvbiIsInBsYWNlaG9sZGVyIiwianNvbiIsImZpbGVwYXRoIiwidXJpRmlsZXBhdGgiLCJlbmNvZGVVUkkiLCJyZWNvcmRFdmVudHMiLCJldmVudENhbGxiYWNrIiwicmVjb25jaWxlQ2FsbGJhY2siLCJBc3NlcnRseUNsaWVudCIsImdldENvbXBvbmVudFByb3BzIiwiY29tcG9uZW50IiwiZnVuY3Rpb25TdHJpbmdpZnkiLCJuZXdQcm9wcyIsInBlbmRpbmdQcm9wcyIsImNoaWxkcmVuIiwiX19wcm90b19fIiwiX2RlYnVnT3duZXIiLCJnZXRDb21wb25lbnROYW1lIiwiZmliZXIiLCJlbGVtZW50VHlwZSIsImRpc3BsYXlOYW1lIiwibWF4TmVzdCIsInJlc3VsdEFycmF5IiwiX2RlYnVnU291cmNlIiwiZmlsZU5hbWUiLCJwdXNoIiwibGluZW51bWJlciIsImxpbmVOdW1iZXIiLCJzcGxpdCIsInBvcCIsImV2ZW50c1dpdGhDb29yZGluYXRlcyIsIm1vdXNldXAiLCJtb3VzZWRvd24iLCJtb3VzZW1vdmUiLCJtb3VzZW92ZXIiLCJvYmoiLCJrIiwidG9TdHJpbmciLCJrZXlzIiwic3RyaXBFeHRyYUNvbXBvbmVudFByb3BzIiwiY2xpZW50WCIsImNsaWVudFkiLCJmaW5kIiwic3RhcnRzV2l0aCIsImludGVybmFsSW5zdGFuY2UiLCJ0YXJnZXRNYXAiLCJjb25maWciLCJyZWNvbmNpbGVFdmVudHMiLCJhZGRBbGxMaXN0ZW5lcnMiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJyZW1vdmVFdmVu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QVlvTCxHQUFaLFdBSFEsS0FBQXpDLGFBQTRCLEdBQzVCLEtBQUEwQyxnQkFBbUMsQ0FBQyxPQUFRLFFBQVMsVUFpQjdELEtBQUFDLGdCQUFrQixXQUNoQixFQUFLM0MsYUFBYXRILFNBQVEsU0FBQ0gsR0FDekI0RyxPQUFPM0QsaUJBQWlCakQsRUFBTyxFQUFLMEgsZUFBZSxNQUdyRCxFQUFLeUMsZ0JBQWdCaEssU0FBUSxTQUFDSCxHQUM1QjRHLE9BQU8zRCxpQkFBaUJqRCxFQUFPLEVBQUsySCxtQkFBbUIsT0FJM0QsS0FBQTBDLG1CQUFxQixXQUNuQixFQUFLNUMsYUFBYXRILFNBQVEsU0FBQ0gsR0FDekI0RyxPQUFPMEQsb0JBQW9CdEssRUFBTyxFQUFLMEgsZUFBZSxNQUV4RCxFQUFLeUMsZ0JBQWdCaEssU0FBUSxTQUFDSCxHQUM1QjRHLE9BQU8wRCxvQkFBb0J0SyxFQUFPLEVBQUsySCxtQkFBbUIsT0FJOUQsS0FBQWhJLE1BQVEsV0FDRGlILE9BQU8yRCxnQ0FDVixFQUFLSCxrQkFDTHhELE9BQU8yRCwrQkFBZ0MsSUFJM0MsS0FBQTFLLEtBQU8sV0FDRCtHLE9BQU8yRCxnQ0FDVCxFQUFLRixxQkFDTHpELE9BQU8yRCwrQkFBZ0MsSUExQ3ZDLElBQUE3QyxFQUlFd0MsRUFBTSxjQUhSdkMsRUFHRXVDLEVBQU0sa0JBRlJ6QyxFQUVFeUMsRUFBTSxhQURSLEVBQ0VBLEVBQU0sZ0JBRFJDLE9BQWUsSUFBRyxPQUFJLEVBRXhCakgsS0FBS3dFLGNBQWdCQSxFQUNyQnhFLEtBQUt5RSxrQkFBb0JBLEVBQ3pCekUsS0FBS3VFLGFBQWVBLEVBQ2hCMEMsSUFDRmpILEtBQUtpSCxnQkFBa0JBLEkiLCJmaWxlIjoiYXNzZXJ0bHkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQge1xuICBmaW5kUmVhY3RFbGVtZW50LFxuICBnZXRDb29yZGluYXRlcyxcbiAgZ2V0Q29tcG9uZW50TmFtZSxcbiAgZ2V0Q29tcG9uZW50UHJvcHMsXG4gIGdldENvbXBvbmVudEluZm9cbn0gZnJvbSBcIi4vdXRpbHNcIjtcblxuXG5pbXBvcnQgRXZlbnRSZWNvcmRlciBmcm9tIFwiLi9ldmVudC1yZWNvcmRlclwiO1xuaW1wb3J0IENsaWVudEludGVyZmFjZSBmcm9tIFwiLi90eXBlcy9DbGllbnRcIjtcbmltcG9ydCBNZXNzYWdlIGZyb20gXCIuL3R5cGVzL01lc3NhZ2VcIjtcbmltcG9ydCB7IEV2ZW50VHlwZSB9IGZyb20gXCIuL3R5cGVzL0V2ZW50VHlwZVwiO1xuXG5pbnRlcmZhY2UgQ29tcG9uZW50IHtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXNzZXJ0bHlDbGllbnQgaW1wbGVtZW50cyBDbGllbnRJbnRlcmZhY2Uge1xuICBldmVudHNUb1JlY29yZDogRXZlbnRUeXBlW10gPSBbXCJjbGlja1wiLCBcImNoYW5nZVwiXTtcblxuICBwcml2YXRlIGV2ZW50UmVjb3JkZXI6IEV2ZW50UmVjb3JkZXI7XG4gIHByaXZhdGUgY29tcG9uZW50RXZlbnRDYWNoZTogTWVzc2FnZVtdID0gW107XG4gIHByaXZhdGUgcHJldmlvdXNDb21wb25lbnQ6IENvbXBvbmVudCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHByZXZpb3VzTXNnOiBNZXNzYWdlIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5ldmVudFJlY29yZGVyID0gbmV3IEV2ZW50UmVjb3JkZXIoe1xuICAgICAgcmVjb3JkRXZlbnRzOiB0aGlzLmV2ZW50c1RvUmVjb3JkLFxuICAgICAgZXZlbnRDYWxsYmFjazogdGhpcy5yZWNvcmRFdmVudCxcbiAgICAgIHJlY29uY2lsZUNhbGxiYWNrOiB0aGlzLnJlY29uY2lsZUV2ZW50Q2FjaGUsXG4gICAgfSk7XG4gIH1cblxuICBzdGFydCA9ICgpID0+IHtcbiAgICB0aGlzLmV2ZW50UmVjb3JkZXIuc3RhcnQoKTtcbiAgfTtcblxuICBzdG9wID0gKCkgPT4ge1xuICAgIHRoaXMuZXZlbnRSZWNvcmRlci5zdG9wKCk7XG4gIH07XG5cbiAgY2xlYXJFdmVudENhY2hlID0gKCkgPT4ge1xuICAgIHRoaXMuY29tcG9uZW50RXZlbnRDYWNoZSA9IFtdO1xuICB9O1xuXG4gIHJlY29uY2lsZUV2ZW50Q2FjaGUgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgY29uc3QgcmVhY3RDb21wb25lbnQgPSBldmVudC50YXJnZXQgPyBmaW5kUmVhY3RFbGVtZW50KGV2ZW50LnRhcmdldCkgOiBudWxsO1xuICAgIGlmIChyZWFjdENvbXBvbmVudCAhPT0gdGhpcy5wcmV2aW91c0NvbXBvbmVudCkge1xuICAgICAgdGhpcy5jb21wb25lbnRFdmVudENhY2hlLmZvckVhY2goKG1zZykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnaW4gdGhlIHJlY29uY2lsZScpO1xuICAgICAgICAvLyB0aGlzLnNlbmRFdmVudChtc2cpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmNsZWFyRXZlbnRDYWNoZSgpO1xuICAgIH1cbiAgfTtcblxuICAvLyByZW1vdmUgYWxsIGRpdnMgd2l0aCBhIGNlcnRhaW4gY2xhc3NuYW1lXG4gIHJlbW92ZU1lbnVzQnlDbGFzc25hbWUgPSAoY2xhc3NuYW1lOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBwcmV2aW91c01lbnVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzbmFtZSkpO1xuICAgIHByZXZpb3VzTWVudXM/Lm1hcCgodmFsOiBhbnkpID0+IHZhbC5yZW1vdmUoKSk7XG4gIH1cblxuICByZW1vdmVTaW5nbGVNZW51ID0gYXN5bmMgKGVsSUQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IG1lbnVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbElEKTtcbiAgICBtZW51RGl2Py5yZW1vdmUoKTtcbiAgfTtcblxuICBzZXR1cE1lbnVEaXYgPSAobW91c2VFdmVudDogTW91c2VFdmVudCkgPT4ge1xuICAgIGNvbnN0IGV2ZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIGNvbnN0IGRpdklEID0gXCJjb21wb25lbnRNZW51XCIgKyBldmVudFRpbWU7XG4gICAgY29uc3QgbWVudURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIik7XG5cbiAgICBtZW51RGl2LnNldEF0dHJpYnV0ZShcImlkXCIsIGRpdklEKTtcbiAgICBtZW51RGl2LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsICdjb21wb25lbnRNZW51Jyk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtZW51RGl2KTtcbiAgICBtZW51RGl2LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIG1lbnVEaXYuc3R5bGUubGVmdCA9IG1vdXNlRXZlbnQueCArICdweCc7XG4gICAgbWVudURpdi5zdHlsZS50b3AgPSBtb3VzZUV2ZW50LnkgKyAncHgnO1xuICAgIG1lbnVEaXYuc3R5bGUuekluZGV4ID0gJzk5OTk5OTk5OTk5OTknO1xuICAgIHJldHVybiBkaXZJRFxuICB9XG5cbiAgYXBwZW5kQnV0dG9uID0gKGVsSUQ6c3RyaW5nICwgbGFiZWw6IHN0cmluZywgc3R5bGVzOiBhbnkgPSB1bmRlZmluZWQpID0+IHtcbiAgICBcbiAgICBjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiQlVUVE9OXCIpO1xuICAgIGJ0bi5zdHlsZS53aWR0aCA9ICcxNTBweCc7XG4gICAgYnRuLmlubmVySFRNTCA9IGxhYmVsO1xuXG4gICAgaWYgKHN0eWxlcykge1xuICAgICAgaWYgKHN0eWxlcy5iYWNrZ3JvdW5kQ29sb3IpIGJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzdHlsZXMuYmFja2dyb3VuZENvbG9yO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsSUQpPy5hcHBlbmRDaGlsZChidG4pO1xuICAgIGNvbnN0IGJyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsSUQpPy5hcHBlbmRDaGlsZChicik7XG4gICAgcmV0dXJuIGJ0blxuICB9XG5cbiAgY3JlYXRlUG9wdXBNZW51ID0gKG1lc3NhZ2U6IE1lc3NhZ2UsIG1vdXNlRXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcblxuICAgIC8vIHJlbW92ZSBhbGwgZXhpc3RpbmcgbWVudXNcbiAgICB0aGlzLnJlbW92ZU1lbnVzQnlDbGFzc25hbWUoJ2NvbXBvbmVudE1lbnUnKVxuICAgIC8vIGNyZWF0ZSB0aGUgZG9tIGVsZW1lbnQgYW5kIHN0b3JlIHRoZSBlbGVtZW50IElEXG4gICAgY29uc3QgZGl2SUQgPSB0aGlzLnNldHVwTWVudURpdihtb3VzZUV2ZW50KSAgICBcblxuICAgIG1lc3NhZ2U/LmNvbXBvbmVudEluZm8/Lm1hcCgodmFsOiBhbnkpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiYnV0dG9uIHZhbDogXCIsIHZhbCk7XG4gICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiQlVUVE9OXCIpO1xuICAgICAgYnRuLnN0eWxlLndpZHRoID0gJzE1MHB4JztcbiAgICAgIGJ0bi5pbm5lckhUTUwgPSB2YWw/LmNvbXBvbmVudE5hbWU7XG4gICAgICBpZiAoYnRuLmlubmVySFRNTCkge1xuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZXZlbnQpID0+IGF3YWl0IHRoaXMuY29tcG9uZW50TWVudUNsaWNrKGV2ZW50LCBkaXZJRCwgbWVzc2FnZSkpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXZJRCk/LmFwcGVuZENoaWxkKGJ0bik7XG4gICAgICAgIGNvbnN0IGJyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXZJRCk/LmFwcGVuZENoaWxkKGJyKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBDYW5jZWxCdG4gPSB0aGlzLmFwcGVuZEJ1dHRvbihkaXZJRCwgJ0NhbmNlbCcpXG4gICAgQ2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5yZW1vdmVTaW5nbGVNZW51KGRpdklEKSk7XG5cbiAgfTtcblxuICBjcmVhdGVFeGlzdGluZ1Rlc3RNZW51ID0gYXN5bmMgKGV2ZW50OiBhbnksIGV4aXN0aW5nVGVzdFJlc3BvbnNlOiBhbnkpID0+IHtcbiAgIFxuICAgIGNvbnN0IGV4aXN0aW5nVGVzdERpdklEID0gdGhpcy5zZXR1cE1lbnVEaXYoZXZlbnQpICBcbiAgICBjb25zdCB0ZXN0ID0gW1wiYVwiLFwiYlwiXVxuXG4gICAgY29uc3QgZGVzY3JpYmVCbG9ja3MgPSBleGlzdGluZ1Rlc3RSZXNwb25zZS5kZXNjcmliZUJsb2NrcztcblxuICAgIGRlc2NyaWJlQmxvY2tzPy5tYXAoICh2YWw6IHN0cmluZykgPT4ge1xuICAgICAgLy8gY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkJVVFRPTlwiKTtcbiAgICAgIC8vIGJ0bi5zdHlsZS53aWR0aCA9ICcxNTBweCc7XG4gICAgICAvLyBidG4uaW5uZXJIVE1MID0gdmFsO1xuICAgICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZXhpc3RpbmdUZXN0RGl2SUQpPy5hcHBlbmRDaGlsZChidG4pO1xuICAgICAgLy8gY29uc3QgYnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIik7XG4gICAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChleGlzdGluZ1Rlc3REaXZJRCk/LmFwcGVuZENoaWxkKGJyKTtcblxuICAgICAgdGhpcy5hcHBlbmRCdXR0b24oZXhpc3RpbmdUZXN0RGl2SUQsIHZhbClcbiAgICB9KVxuICAgIGNvbnN0IG5ld1Rlc3RCdG4gPSB0aGlzLmFwcGVuZEJ1dHRvbihleGlzdGluZ1Rlc3REaXZJRCwgJ0NyZWF0ZSBOZXcgVGVzdCcpXG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSB0aGlzLmFwcGVuZEJ1dHRvbihleGlzdGluZ1Rlc3REaXZJRCwgJ0NhbmNlbCcsIHtiYWNrZ3JvdW5kQ29sb3I6ICcjZGYyYTJhN2EnfSlcbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiBhd2FpdCB0aGlzLnJlbW92ZVNpbmdsZU1lbnUoZXhpc3RpbmdUZXN0RGl2SUQpKTtcblxuICAgIHJldHVybiB7bmV3VGVzdEJ0bjogbmV3VGVzdEJ0biwgZXhpc3RpbmdUZXN0TWVudUlEOiBleGlzdGluZ1Rlc3REaXZJRH1cbiAgfVxuXG4gIGNvbXBvbmVudE1lbnVDbGljayA9IGFzeW5jIChldmVudDogYW55LCBkaXZJRDogYW55LCBtZXNzYWdlOiBNZXNzYWdlKTogUHJvbWlzZTxhbnk+ID0+IHtcblxuICAgIGF3YWl0IHRoaXMucmVtb3ZlU2luZ2xlTWVudShkaXZJRCk7XG5cbiAgICBjb25zdCBzZWxlY3RlZENvbXBvbmVudCA9IG1lc3NhZ2UuY29tcG9uZW50SW5mbz8ucmVkdWNlKFxuICAgICAgKGFjYzogYW55LCBjdXJyOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKGN1cnIuY29tcG9uZW50TmFtZSA9PT0gZXZlbnQudGFyZ2V0Py5pbm5lckhUTUwpIHtcbiAgICAgICAgICByZXR1cm4gey4uLmN1cnJ9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH1cbiAgICAgIH0sIG51bGwpO1xuXG4gICAgZXZlbnQ/LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIFxuICAgIC8vIGNoZWNrIGZvciBleGlzdGluZyB0ZXN0c1xuICAgIGNvbnN0IGV4aXN0aW5nVGVzdFJlc3BvbnNlID0gYXdhaXQgdGhpcy5jaGVja0ZvckV4aXN0aW5nVGVzdChzZWxlY3RlZENvbXBvbmVudD8uZmlsZW5hbWUpO1xuXG4gICAgLy8gaWYgdGhlcmUgaXMgYW4gZXhpc3RpbmcgdGVzdCwgc2hvdyB0aGUgZXhpc3RpbmcgdGVzdCBtZW51LCBvdGhlcndpc2UganVzdCBjcmVhdGUgdGhlIG5ldyB0ZXN0XG4gICAgaWYgKGV4aXN0aW5nVGVzdFJlc3BvbnNlLmRlc2NyaWJlQmxvY2tzKSB7XG4gICAgICBjb25zdCBleGlzdGluZ1Rlc3RNZW51UmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNyZWF0ZUV4aXN0aW5nVGVzdE1lbnUoZXZlbnQsIGV4aXN0aW5nVGVzdFJlc3BvbnNlKVxuICAgICAgLy8gYWRkIGxpc3RlbmVyIGZvciBjcmVhdGluZyBhIGJyYW5kIG5ldyB0ZXN0XG4gICAgICBleGlzdGluZ1Rlc3RNZW51UmVzcG9uc2UubmV3VGVzdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVOZXdUZXN0KHtcbiAgICAgICAgICAuLi5tZXNzYWdlLFxuICAgICAgICAgIGNvbXBvbmVudEluZm86IHNlbGVjdGVkQ29tcG9uZW50LFxuICAgICAgICAgIGNoZWNrZWRFdmVudDogZXhpc3RpbmdUZXN0UmVzcG9uc2UuY2hlY2tlZEV2ZW50XG4gICAgICAgIH0pXG4gICAgICAgIGF3YWl0IHRoaXMucmVtb3ZlU2luZ2xlTWVudShleGlzdGluZ1Rlc3RNZW51UmVzcG9uc2UuZXhpc3RpbmdUZXN0TWVudUlEKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZU5ld1Rlc3Qoey4uLm1lc3NhZ2UsIGNvbXBvbmVudEluZm86IHNlbGVjdGVkQ29tcG9uZW50LCBjaGVja2VkRXZlbnQ6IGV4aXN0aW5nVGVzdFJlc3BvbnNlLmNoZWNrZWRFdmVudH0pXG4gICAgfVxuXG4gICAgLy8gdGhpcy5zZW5kRXZlbnQoe1xuICAgIC8vICAgLi4ubWVzc2FnZSxcbiAgICAvLyAgIC8vIHRoZXJlIHNob3VsZCBvbmx5IGJlIG9uZSBtYXRjaCBoZXJlIG9uIHRoZSBmaWx0ZXJcbiAgICAvLyAgIC8vIGNvbXBvbmVudEluZm86IG1lc3NhZ2UuY29tcG9uZW50SW5mbz8uZmlsdGVyKCAodmFsOmFueSkgPT4gdmFsLmNvbXBvbmVudE5hbWUgPT09IGV2ZW50LnRhcmdldD8uaW5uZXJIVE1MKVxuICAgIC8vICAgY29tcG9uZW50SW5mbzogc2VsZWN0ZWRDb21wb25lbnRcbiAgICAvLyB9KS50aGVuKHJlcyA9PiB7Y29uc29sZS5sb2coJ2RvdCB0aGVuJywgcmVzKX0pO1xuXG5cbiAgfTtcblxuXG5cbiAgZ2V0TWVzc2FnZSA9IChyZWFjdENvbXBvbmVudDogYW55LCBldmVudDogS2V5Ym9hcmRFdmVudCB8IEV2ZW50KTogTWVzc2FnZSA9PiB7XG5cbiAgICAvLyBmdW5jdGlvbiB0byB1c2UgaW4gYXJyYXkgcmVkdWNlXG4gICAgY29uc3QgZmluZENsaWNrSGFuZGxlciA9IChhY2N1bXVsYXRvcjogYW55LCBjdXJyZW50VmFsdWU6IGFueSkgPT4ge1xuICAgICAgaWYgKGN1cnJlbnRWYWx1ZS5wcm9wcz8ub25DbGljaykge1xuICAgICAgICByZXR1cm4gey4uLmN1cnJlbnRWYWx1ZX07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50O1xuICAgIGNvbnN0IGlucHV0VGFyZ2V0ID0gdGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgbGlua1RhcmdldCA9IHRhcmdldCBhcyBIVE1MTGlua0VsZW1lbnQ7XG5cbiAgICBjb25zdCBjb21wb25lbnRJbmZvID0gZ2V0Q29tcG9uZW50SW5mbyhyZWFjdENvbXBvbmVudCwgMTAsIFtdKTtcblxuICAgIC8vIGZpbmQgdGhlIGNsb3Nlc3QgY2xpY2sgaGFuZGxlciB0aGF0IHdvdWxkIGhhdmUgYmVlbiB0cmlnZ2VyZWRcbiAgICAvLyBub3RlLCBzbGljZSgwKSBjb3BpZXMgdGhlIGFycmF5XG4gICAgY29uc3QgY2xpY2tIYW5kbGVyID0gY29tcG9uZW50SW5mbz8uc2xpY2UoMCk/LnJldmVyc2UoKT8ucmVkdWNlKGZpbmRDbGlja0hhbmRsZXIsIG51bGwpO1xuXG5cbiAgICAvLyBjb25zb2xlLmxvZygnY29tcG9uZW50IGluZm8gaW4gR0VUX01FU1NBR0U6ICcsIGNvbXBvbmVudEluZm8sIGNsaWNrSGFuZGxlcilcblxuICAgIGNvbnN0IG1lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICAvLyBjb21wb25lbnROYW1lLCBmaWxlTmFtZSwgYW5kIGxpbmVOdW1iZXIgYXJlIGFscmVhZHkgaW4gdGhlIG9iamVjdCByZXR1cm5lZFxuICAgICAgYWN0aW9uOiBldmVudC50eXBlLFxuICAgICAgY2hlY2tlZDogZXZlbnQ/LnRhcmdldD8uaGFzT3duUHJvcGVydHkoXCJjaGVja2VkXCIpXG4gICAgICAgID8gaW5wdXRUYXJnZXQuY2hlY2tlZFxuICAgICAgICA6IG51bGwsXG4gICAgICBjb29yZGluYXRlczogZ2V0Q29vcmRpbmF0ZXMoZXZlbnQpLFxuICAgICAgaHJlZjogbGlua1RhcmdldC5ocmVmID8gbGlua1RhcmdldC5ocmVmIDogbnVsbCxcbiAgICAgIGtleUNvZGU6IChldmVudCBhcyBLZXlib2FyZEV2ZW50KS5rZXlDb2RlXG4gICAgICAgID8gKGV2ZW50IGFzIEtleWJvYXJkRXZlbnQpLmtleUNvZGVcbiAgICAgICAgOiBudWxsLFxuICAgICAgdGFnTmFtZTogaW5wdXRUYXJnZXQudGFnTmFtZSxcbiAgICAgIHRhZ1R5cGU6IGlucHV0VGFyZ2V0LnR5cGUsXG4gICAgICB0ZXh0Q29udGVudDogaW5wdXRUYXJnZXQudGV4dENvbnRlbnQgfHwgaW5wdXRUYXJnZXQuaW5uZXJUZXh0LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICAgIHZhbHVlOiBpbnB1dFRhcmdldC52YWx1ZSxcbiAgICAgIHdyaXRlVGVzdExvY2F0aW9uOiAnJyxcbiAgICAgIGNvbXBvbmVudEluZm86IGNvbXBvbmVudEluZm8sXG4gICAgICBjbGlja0hhbmRsZXJDb21wb25lbnQ6IGNsaWNrSGFuZGxlcixcbiAgICAgIGNoZWNrZWRFdmVudDogdW5kZWZpbmVkXG5cbiAgICB9O1xuXG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH07XG5cblxuICByZWNvcmRFdmVudCA9IChldmVudDogRXZlbnQpID0+IHtcbiAgICBjb25zdCBub2RlVGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIE5vZGU7XG4gICAgY29uc3QgbW91c2VFdmVudCA9IGV2ZW50IGFzIE1vdXNlRXZlbnQ7XG5cbiAgICAvLyBpZiB0aGUgY2xpY2sgaXMgb24gYSBtZW51IHRoYXQgcG9wcyB1cCwgZG9udCBnbyB0aHJvdWdoIHRoZSByZWNvcmQgZXZlbnQgbG9naWNcbiAgICBpZiAobm9kZVRhcmdldD8ucGFyZW50RWxlbWVudD8uZ2V0QXR0cmlidXRlKFwiaWRcIik/LmluY2x1ZGVzKCdjb21wb25lbnRNZW51JykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFldmVudC50YXJnZXQpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5wcmV2aW91c01zZykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgKGV2ZW50LnR5cGUgPT09IFwiY2hhbmdlXCIgfHwgZXZlbnQudHlwZSA9PT0gXCJjbGlja1wiKSAmJlxuICAgICAgICAgIHRoaXMucHJldmlvdXNNc2cgJiZcbiAgICAgICAgICB0aGlzLnByZXZpb3VzTXNnLmFjdGlvbiA9PT0gXCJjbGlja1wiICYmXG4gICAgICAgICAgbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLnByZXZpb3VzTXNnLnRpbWVzdGFtcCA8IDEwMFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIm1lc3NhZ2Ugbm90IHNlbmQgZHVlIHRvIHRpbWVcIik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlYWN0Q29tcG9uZW50ID0gZmluZFJlYWN0RWxlbWVudChldmVudC50YXJnZXQpO1xuICAgICAgY29uc3QgbXNnOiBNZXNzYWdlID0gdGhpcy5nZXRNZXNzYWdlKHJlYWN0Q29tcG9uZW50LCBldmVudCk7XG4gICAgICBjb25zb2xlLmxvZygncmVhY3RDb21wb25lbnQgYW5kIG1lc3NhZ2UgaW4gUkVDT1JEX0VWRU5UOiAnLCByZWFjdENvbXBvbmVudCwgbXNnKTtcblxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJsYXN0RXZlbnRcIiwgSlNPTi5zdHJpbmdpZnkobXNnKSk7XG4gICAgICB0aGlzLnByZXZpb3VzTXNnID0gbXNnO1xuXG4gICAgICAvLyBpZiAoXG4gICAgICAvLyAgIC8vIGlmIHRoZXJlIGlzIG5vIHByZXZpb3VzIGNvbXBvbmVudCBvciB0aGUgcHJldmlvdXMgY29tcG9uZW50IGlzIHRoZSBzYW1lIGFzIHRoZSBjb21wb25lbnQgeW91IGp1c3QgY2xpY2tlZCBvblxuICAgICAgLy8gICAhdGhpcy5wcmV2aW91c0NvbXBvbmVudCB8fFxuICAgICAgLy8gICAodGhpcy5wcmV2aW91c0NvbXBvbmVudCAmJiB0aGlzLnByZXZpb3VzQ29tcG9uZW50ID09PSByZWFjdENvbXBvbmVudClcbiAgICAgIC8vICkge1xuICAgICAgLy8gICB0aGlzLnByZXZpb3VzQ29tcG9uZW50ID0gcmVhY3RDb21wb25lbnQ7XG4gICAgICAvLyAgIGlmIChcbiAgICAgIC8vICAgICB0aGlzLnByZXZpb3VzQ29tcG9uZW50ICYmXG4gICAgICAvLyAgICAgbXNnLmNoZWNrZWQgIT09IG51bGwgJiZcbiAgICAgIC8vICAgICBtc2cuYWN0aW9uID09PSBcImNsaWNrXCJcbiAgICAgIC8vICAgKSB7XG4gICAgICAvLyAgICAgLy8gbWVzc2FnZSBpcyBzZW50IHdoZW4gc29tZXRoaW5nIGluIHRoZSBwb3B1cCBtZW51IGlzIHNlbGVjdGVkXG4gICAgICAvLyAgICAgdGhpcy5jcmVhdGVQb3B1cE1lbnUobXNnKTtcbiAgICAgIC8vICAgICAvLyB0aGlzLnNlbmRFdmVudChtc2cpO1xuICAgICAgLy8gICAgIHJldHVybjtcbiAgICAgIC8vICAgfVxuXG4gICAgICAvLyAgIC8vcHVzaGluZyBhIG1lc3NhZ2UgdG8gdGhlIGV2ZW50IGNhY2hlIHNlbmRzIGl0IHRvIHRoZSBhcGkgd2hlbiB0aGUgcmVjb25jaWxlIGNhbGxiYWNrIGlzIGNhbGxlZFxuICAgICAgLy8gICB0aGlzLmNvbXBvbmVudEV2ZW50Q2FjaGUucHVzaChtc2cpO1xuXG4gICAgICAvLyAgIHJldHVybjtcbiAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAvLyAgIHRoaXMuY2xlYXJFdmVudENhY2hlKCk7XG4gICAgICAvLyB9XG5cbiAgICAgIHRoaXMucHJldmlvdXNDb21wb25lbnQgPSByZWFjdENvbXBvbmVudDtcblxuICAgICAgLy8gbWVzc2FnZSBpcyBzZW50IHdoZW4gc29tZXRoaW5nIGluIHRoZSBwb3B1cCBtZW51IGlzIHNlbGVjdGVkXG4gICAgICBpZiAobW91c2VFdmVudD8ubWV0YUtleSkgdGhpcy5jcmVhdGVQb3B1cE1lbnUobXNnLCBtb3VzZUV2ZW50KTtcbiAgICAgIC8vIHRoaXMuc2VuZEV2ZW50KG1zZyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHJlY29yZGluZyBldmVudFwiLCBlKTtcbiAgICB9XG4gIH07XG5cbiAgY3JlYXRlTmV3VGVzdCA9IGFzeW5jIChtZXNzYWdlOiBNZXNzYWdlKSA9PiB7XG4gICAgbGV0IGFjY291bnRJZCA9ICh3aW5kb3cgYXMgeyBba2V5OiBzdHJpbmddOiBhbnkgfSlbXCJkYXRhTGF5ZXJcIl1bMF1bXCJhcGlLZXlcIl07XG5cbiAgICBjb25zb2xlLmxvZygnbWVzc2FnZTogJywgbWVzc2FnZSApO1xuXG4gICAgLy8gcmF0aGVyIGdldCBhIDQwMyB0aGFuIGEgYmFkIHJvdXRlXG4gICAgaWYgKCFhY2NvdW50SWQpIHtcbiAgICAgIGFjY291bnRJZCA9IDE7XG4gICAgfVxuXG4gICAgY29uc3QgdXJsID0gYC8vbG9jYWxob3N0OjMwMjAvYXBpL2FjY291bnRzLyR7YWNjb3VudElkfS9ldmVudHMvYDtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgbW9kZTogXCJjb3JzXCIsXG4gICAgICBjYWNoZTogXCJuby1jYWNoZVwiLFxuICAgICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB1cmw6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxuICAgICAgICBldmVudDogbWVzc2FnZSxcbiAgICAgICAgLy8gVE9ETzogdGVzdCBzZXQgaWQgc2hvdWxkIGJlIHNldCB3aGVuIGNyZWF0aW5nL2xvYWRpbmcgdGVzdHNldCBpbiB0aGUgcnVubmVyXG4gICAgICAgIHBsYWNlaG9sZGVyOiBudWxsLFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXG4gIH07XG5cbiAgY2hlY2tGb3JFeGlzdGluZ1Rlc3QgPSBhc3luYyAoZmlsZXBhdGg6IHN0cmluZykgPT4ge1xuICAgIGxldCBhY2NvdW50SWQgPSAod2luZG93IGFzIHsgW2tleTogc3RyaW5nXTogYW55IH0pW1wiZGF0YUxheWVyXCJdWzBdW1wiYXBpS2V5XCJdO1xuXG4gICAgLy8gcmF0aGVyIGdldCBhIDQwMyB0aGFuIGEgYmFkIHJvdXRlXG4gICAgaWYgKCFhY2NvdW50SWQpIHtcbiAgICAgIGFjY291bnRJZCA9IDE7XG4gICAgfVxuXG4gICAgY29uc3QgdXJpRmlsZXBhdGggPSBlbmNvZGVVUkkoZmlsZXBhdGgpXG4gICAgY29uc3QgdXJsID0gYC8vbG9jYWxob3N0OjMwMjAvYXBpL2FjY291bnRzLyR7YWNjb3VudElkfS9ldmVudHMvP2ZpbGVwYXRoPSR7dXJpRmlsZXBhdGh9YDtcblxuICAgIGNvbnNvbGUubG9nKCd1cmwgaGl0OiAnLCB1cmwsIHVyaUZpbGVwYXRoKVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBtb2RlOiBcImNvcnNcIixcbiAgICAgIGNhY2hlOiBcIm5vLWNhY2hlXCIsXG4gICAgICBjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgfTtcbn1cblxuKDxhbnk+d2luZG93KS5ldmVudFJlY29yZGVyID0gbmV3IEFzc2VydGx5Q2xpZW50KCk7XG4oPGFueT53aW5kb3cpLmV2ZW50UmVjb3JkZXIuc3RhcnQoKTtcblxuIiwiaW1wb3J0IENvb3JkaW5hdGVzIGZyb20gXCIuL3R5cGVzL0Nvb3JkaW5hdGVzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21wb25lbnRJbmZvKGNvbXBvbmVudDogYW55LCBtYXhOZXN0OiBudW1iZXIsIHJlc3VsdEFycmF5OiBhbnkpOiBhbnkge1xuICBjb25zb2xlLmxvZygnZ2V0Q29tcG9uZW50SW5mbzogJywgY29tcG9uZW50LCByZXN1bHRBcnJheSlcblxuICBpZiAoIWNvbXBvbmVudCB8fCBtYXhOZXN0ID09PSAwKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ3Jlc3VsdEFycmF5OiAnLCByZXN1bHRBcnJheSlcbiAgICByZXR1cm4gcmVzdWx0QXJyYXlcbiAgfVxuXG4gIGlmIChjb21wb25lbnQ/Ll9kZWJ1Z1NvdXJjZT8uZmlsZU5hbWUpIHtcbiAgICAvLyB0aGUgb3duZXIgb2YgdGhlIG5vZGUgd2hlcmUgdGhlICdzb3VyY2UnIGZpbGVuYW1lIGV4aXN0cyBpcyB0aGUgZmlsZSB0aGF0IHlvdSB3YW50IHRoZSBwcm9wcyBmb3IgXG4gICAgY29uc3QgcHJvcHMgPSBnZXRDb21wb25lbnRQcm9wcyhjb21wb25lbnQ/Ll9kZWJ1Z093bmVyKVxuICAgIGNvbnN0IG5hbWUgPSBnZXRDb21wb25lbnROYW1lKGNvbXBvbmVudD8uX2RlYnVnT3duZXIpXG4gICAgcmVzdWx0QXJyYXkucHVzaCh7XG4gICAgICBmaWxlbmFtZTogY29tcG9uZW50Py5fZGVidWdTb3VyY2U/LmZpbGVOYW1lLCBcbiAgICAgIC8vIHRoZSBsaW5lIG51bWJlciBpcyByZWFsbHkgZm9yIHRoZSBuZXh0IGNvbXBvbmVudCBkb3duIGluIHRoZSB0cmVlIHRoYXQgaXMgYmVpbmcgY2FsbGVkIGZyb20gdGhlICdmaWxlbmFtZSdcbiAgICAgIGxpbmVudW1iZXI6IGNvbXBvbmVudD8uX2RlYnVnU291cmNlPy5saW5lTnVtYmVyLCBcbiAgICAgIHByb3BzOiBwcm9wcywgXG4gICAgICAvLyBpZiBpdCdzIGNvbXBvbmVudCAgc3RyLnNwbGl0KCdcXFxcJykucG9wLnNwbGl0KGAvYCkucG9wKCkuc3BsaXQoJy4nKVswXVxuICAgICAgY29tcG9uZW50TmFtZTogbmFtZSA9PT0gJ0NvbXBvbmVudCcgPyBcbiAgICAgICAgY29tcG9uZW50Py5fZGVidWdTb3VyY2U/LmZpbGVOYW1lPy5zcGxpdCgnXFxcXCcpLnBvcCgpLnNwbGl0KGAvYCkucG9wKCkuc3BsaXQoJy4nKVswXSA6IG5hbWVcbiAgICB9KVxuICAgIHJldHVybiBnZXRDb21wb25lbnRJbmZvKGNvbXBvbmVudD8uX2RlYnVnT3duZXIsbWF4TmVzdC0xLHJlc3VsdEFycmF5KVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBnZXRDb21wb25lbnRJbmZvKGNvbXBvbmVudD8uX2RlYnVnT3duZXIsbWF4TmVzdC0xLHJlc3VsdEFycmF5KVxuICB9XG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbXBvbmVudFByb3BzKGNvbXBvbmVudDogYW55LCBwcm9wcyA9IHt9KTogYW55IHtcbiAgaWYgKCFjb21wb25lbnQpIHtcbiAgICBmdW5jdGlvblN0cmluZ2lmeShwcm9wcyk7XG4gICAgcmV0dXJuIHByb3BzO1xuICB9XG5cbiAgY29uc3QgbmV3UHJvcHMgPSBjb21wb25lbnQucGVuZGluZ1Byb3BzXG4gICAgPyB7IC4uLnByb3BzLCAuLi5jb21wb25lbnQucGVuZGluZ1Byb3BzIH1cbiAgICA6IHByb3BzO1xuICBkZWxldGUgbmV3UHJvcHMuY2hpbGRyZW47XG5cbiAgaWYgKFxuICAgIGNvbXBvbmVudD8udHlwZT8uX19wcm90b19fICYmXG4gICAgW1wiQ29tcG9uZW50XCIsIFwiUHVyZUNvbXBvbmVudFwiXS5pbmNsdWRlcyhjb21wb25lbnQudHlwZS5fX3Byb3RvX18ubmFtZSlcbiAgKSB7XG4gICAgZnVuY3Rpb25TdHJpbmdpZnkobmV3UHJvcHMpO1xuICAgIHJldHVybiBuZXdQcm9wcztcbiAgfVxuXG4gIHJldHVybiBnZXRDb21wb25lbnRQcm9wcyhjb21wb25lbnQuX2RlYnVnT3duZXIsIG5ld1Byb3BzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbXBvbmVudE5hbWUoZmliZXI6IGFueSk6IGFueSB7XG4gIGlmICghZmliZXIpIHJldHVybiBudWxsO1xuXG4gIGlmIChmaWJlci5lbGVtZW50VHlwZSAmJiBmaWJlci5lbGVtZW50VHlwZS5uYW1lKSB7XG4gICAgcmV0dXJuIGZpYmVyLmVsZW1lbnRUeXBlLm5hbWU7XG4gIH1cblxuICBpZiAoZmliZXIuZWxlbWVudFR5cGUgJiYgZmliZXIuZWxlbWVudFR5cGUuZGlzcGxheU5hbWUpIHtcbiAgICByZXR1cm4gZmliZXIuZWxlbWVudFR5cGUuZGlzcGxheU5hbWU7XG4gIH1cblxuICBpZiAoZmliZXIudHlwZS5kaXNwbGF5TmFtZSkge1xuICAgIHJldHVybiBmaWJlci50eXBlLmRpc3BsYXlOYW1lO1xuICB9XG5cbiAgaWYgKGZpYmVyLnR5cGUubmFtZSkge1xuICAgIHJldHVybiBmaWJlci50eXBlLm5hbWU7XG4gIH1cbiAgcmV0dXJuIGdldENvbXBvbmVudE5hbWUoZmliZXIuX2RlYnVnT3duZXIpO1xufVxuXG5jb25zdCBldmVudHNXaXRoQ29vcmRpbmF0ZXM6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB7XG4gIG1vdXNldXA6IHRydWUsXG4gIG1vdXNlZG93bjogdHJ1ZSxcbiAgbW91c2Vtb3ZlOiB0cnVlLFxuICBtb3VzZW92ZXI6IHRydWUsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29vcmRpbmF0ZXMoZXZlbnQ6IEV2ZW50KTogQ29vcmRpbmF0ZXMgfCBudWxsIHtcbiAgY29uc3QgbW91c2VFdmVudCA9IGV2ZW50IGFzIE1vdXNlRXZlbnQ7XG5cbiAgcmV0dXJuIGV2ZW50c1dpdGhDb29yZGluYXRlc1tldmVudC50eXBlXVxuICAgID8geyB4OiBtb3VzZUV2ZW50LmNsaWVudFgsIHk6IG1vdXNlRXZlbnQuY2xpZW50WSB9XG4gICAgOiBudWxsO1xufVxuXG4vLyBtYXAgcmVhY3QgY2xhc3NlcyB0byBkb20gZWxlbWVudHNcbmV4cG9ydCBmdW5jdGlvbiBmaW5kUmVhY3RFbGVtZW50RFVSS0EodGFyZ2V0OiBFdmVudFRhcmdldCk6IGFueSB7XG4gIC8vIGNvbnNvbGUuZGlyKHRhcmdldClcbiAgY29uc3Qga2V5ID0gT2JqZWN0LmtleXModGFyZ2V0KS5maW5kKChrZXkpID0+XG4gICAga2V5LnN0YXJ0c1dpdGgoXCJfX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSRcIilcbiAgKTtcbiAgLy8gY29uc29sZS5sb2coJ2tleTogJywga2V5KVxuICAvLyBjcmVhdGVzIGFuIG9iamVjdCBvdXQgb2YgdGhlIHRhcmdldCBwYXNzZWRcbiAgY29uc3QgdGFyZ2V0TWFwID0gdGFyZ2V0IGFzIHsgW2tleTogc3RyaW5nXTogYW55IH07XG5cbiAgY29uc3QgaW50ZXJuYWxJbnN0YW5jZSA9IGtleSA/IHRhcmdldE1hcFtrZXldIDogbnVsbDtcbiAgLy8gY29uc29sZS5sb2coJ1JlYWN0IE5vZGUgaWYgRm91bmQ6ICcsIGludGVybmFsSW5zdGFuY2UpXG4gIGlmIChpbnRlcm5hbEluc3RhbmNlID09IG51bGwpIHJldHVybiBudWxsO1xuXG4gIC8vIGNvbnNvbGUubG9nKCdpbnRlcm5hbEluc3RhbmNlMjogJywgaW50ZXJuYWxJbnN0YW5jZSlcbiAgLy8gcmV0dXJuIGludGVybmFsSW5zdGFuY2UuX2RlYnVnT3duZXJcbiAgLy8gICA/IGludGVybmFsSW5zdGFuY2UuX2RlYnVnT3duZXIuc3RhdGVOb2RlXG4gIC8vICAgOiBpbnRlcm5hbEluc3RhbmNlLnJldHVybi5zdGF0ZU5vZGU7XG5cbiAgcmV0dXJuIGludGVybmFsSW5zdGFuY2U7XG5cbiAgLy8gZm9yIChsZXQga2V5OiBzdHJpbmcgaW4gdGFyZ2V0KSB7XG4gIC8vICAgaWYgKGtleS5zdGFydHNXaXRoKFwiX19yZWFjdEludGVybmFsSW5zdGFuY2UkXCIpKSB7XG4gIC8vICAgICAvLyBjb25zb2xlLmxvZygna2V5cyBpbiB0aGUgZmluZCBSZWFjdEVsZW1lbnQnLCB0YXJnZXRba2V5XSlcbiAgLy8gICAgIHJldHVybiB0YXJnZXRba2V5XTtcbiAgLy8gICB9XG4gIC8vIH1cbiAgLy8gcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kUmVhY3RFbGVtZW50KHRhcmdldDogRXZlbnRUYXJnZXQpOiBhbnkge1xuICAvLyBjb25zdCBrZXkgPSBPYmplY3Qua2V5cyh0YXJnZXQpLmZpbmQoKGtleSkgPT5cbiAgLy8gICBrZXkuc3RhcnRzV2l0aChcIl9fcmVhY3RJbnRlcm5hbEluc3RhbmNlJFwiKVxuICAvLyApO1xuICBjb25zdCB0YXJnZXRNYXAgPSB0YXJnZXQgYXMgeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgLy8gY29uc3QgaW50ZXJuYWxJbnN0YW5jZSA9IGtleSA/IHRhcmdldE1hcFtrZXldIDogbnVsbDtcbiAgLy8gaWYgKGludGVybmFsSW5zdGFuY2UgPT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gIC8vIHJldHVybiBpbnRlcm5hbEluc3RhbmNlLl9kZWJ1Z093bmVyXG4gIC8vICAgPyBpbnRlcm5hbEluc3RhbmNlLl9kZWJ1Z093bmVyLnN0YXRlTm9kZVxuICAvLyAgIDogaW50ZXJuYWxJbnN0YW5jZS5yZXR1cm4uc3RhdGVOb2RlO1xuICBmb3IgKGxldCBrZXkgaW4gdGFyZ2V0TWFwKSB7XG4gICAgaWYgKGtleS5zdGFydHNXaXRoKFwiX19yZWFjdEludGVybmFsSW5zdGFuY2UkXCIpKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygna2V5cyBpbiB0aGUgZmluZCBSZWFjdEVsZW1lbnQnLCB0YXJnZXRba2V5XSlcbiAgICAgIHJldHVybiB0YXJnZXRNYXBba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGZ1bmN0aW9uU3RyaW5naWZ5KG9iajogYW55KTogdm9pZCB7XG4gIGZvciAobGV0IGsgaW4gb2JqKSB7XG4gICAgaWYgKG9ialtrXSAmJiB7fS50b1N0cmluZy5jYWxsKG9ialtrXSkgPT09IFwiW29iamVjdCBGdW5jdGlvbl1cIikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gb2JqW2tdID0gXCJcIiArIG9ialtrXTtcbiAgICAgICAgLy8gLy8gZ2V0IHJpZCBvZiB0aGUgZXh0cmEgbGluZSBtYXJrZXJzXG4gICAgICAgIC8vIG9ialtrXSA9IG9ialtrXS5yZXBsYWNlKC8oXFxyXFxufFxcbnxcXHIpL2dtLCBcIlwiKTtcbiAgICAgICAgb2JqW2tdID0gXCJbRnVuY3Rpb25dXCJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHN0cmluZ2lmeWluZyBwcm9wXCIsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBzdHJpcEV4dHJhQ29tcG9uZW50UHJvcHMob2JqKTtcbn1cblxuXG5cbmZ1bmN0aW9uIHN0cmlwRXh0cmFDb21wb25lbnRQcm9wcyhwcm9wczogYW55KTogdm9pZCB7XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcyk7XG4gIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICBpZiAoXG4gICAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocHJvcHNba2V5XSkgPT09IFwiW29iamVjdCBPYmplY3RdXCIgJiZcbiAgICAgIChwcm9wc1trZXldLmhhc093blByb3BlcnR5KFwiX293bmVyXCIpIHx8XG4gICAgICAgIGtleSA9PT0gXCJpbnB1dFJlZlwiIHx8XG4gICAgICAgIGtleSA9PT0gXCJJbnB1dFByb3BzXCIpXG4gICAgKSB7XG4gICAgICBkZWxldGUgcHJvcHNba2V5XTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IEV2ZW50VHlwZSwgUmVjb25jaWxlVHlwZSB9IGZyb20gXCIuL3R5cGVzL0V2ZW50VHlwZVwiO1xuaW1wb3J0IHsgUmVjb3JkZXJDb25maWcgfSBmcm9tIFwiLi90eXBlcy9SZWNvcmRlckNvbmZpZ1wiO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBXaW5kb3cge1xuICAgIHJlY29yZGVyQWRkZWRDb250cm9sTGlzdGVuZXJzOiBib29sZWFuO1xuICAgIGRhdGFMYXllcjogYW55W107XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXZlbnRSZWNvcmRlciB7XG4gIHByaXZhdGUgZXZlbnRDYWxsYmFjazogKGV2ZW50OiBFdmVudCkgPT4gYW55O1xuICBwcml2YXRlIHJlY29uY2lsZUNhbGxiYWNrOiAoZXZlbnQ6IEV2ZW50KSA9PiBhbnk7XG4gIHByaXZhdGUgcmVjb3JkRXZlbnRzOiBFdmVudFR5cGVbXSA9IFtdO1xuICBwcml2YXRlIHJlY29uY2lsZUV2ZW50czogUmVjb25jaWxlVHlwZVtdID0gW1wiYmx1clwiLCBcImZvY3VzXCIsIFwiY2hhbmdlXCJdO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogUmVjb3JkZXJDb25maWcpIHtcbiAgICBjb25zdCB7XG4gICAgICBldmVudENhbGxiYWNrLFxuICAgICAgcmVjb25jaWxlQ2FsbGJhY2ssXG4gICAgICByZWNvcmRFdmVudHMsXG4gICAgICByZWNvbmNpbGVFdmVudHMgPSBudWxsLFxuICAgIH0gPSBjb25maWc7XG4gICAgdGhpcy5ldmVudENhbGxiYWNrID0gZXZlbnRDYWxsYmFjaztcbiAgICB0aGlzLnJlY29uY2lsZUNhbGxiYWNrID0gcmVjb25jaWxlQ2FsbGJhY2s7XG4gICAgdGhpcy5yZWNvcmRFdmVudHMgPSByZWNvcmRFdmVudHM7XG4gICAgaWYgKHJlY29uY2lsZUV2ZW50cykge1xuICAgICAgdGhpcy5yZWNvbmNpbGVFdmVudHMgPSByZWNvbmNpbGVFdmVudHM7XG4gICAgfVxuICB9XG5cbiAgYWRkQWxsTGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHRoaXMucmVjb3JkRXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGhpcy5ldmVudENhbGxiYWNrLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIHRoaXMucmVjb25jaWxlRXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGhpcy5yZWNvbmNpbGVDYWxsYmFjaywgdHJ1ZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmVtb3ZlQWxsTGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIHRoaXMucmVjb3JkRXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgdGhpcy5ldmVudENhbGxiYWNrLCB0cnVlKTtcbiAgICB9KTtcbiAgICB0aGlzLnJlY29uY2lsZUV2ZW50cy5mb3JFYWNoKChldmVudDogUmVjb25jaWxlVHlwZSkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIHRoaXMucmVjb25jaWxlQ2FsbGJhY2ssIHRydWUpO1xuICAgIH0pO1xuICB9O1xuXG4gIHN0YXJ0ID0gKCkgPT4ge1xuICAgIGlmICghd2luZG93LnJlY29yZGVyQWRkZWRDb250cm9sTGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLmFkZEFsbExpc3RlbmVycygpO1xuICAgICAgd2luZG93LnJlY29yZGVyQWRkZWRDb250cm9sTGlzdGVuZXJzID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgc3RvcCA9ICgpID0+IHtcbiAgICBpZiAod2luZG93LnJlY29yZGVyQWRkZWRDb250cm9sTGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgd2luZG93LnJlY29yZGVyQWRkZWRDb250cm9sTGlzdGVuZXJzID0gZmFsc2U7XG4gICAgfVxuICB9O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==