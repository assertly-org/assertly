!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))((function(r,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function l(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,l)}u((o=o.apply(e,n||[])).next())}))},i=this&&this.__generator||function(e,n){var t,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=c.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=n.call(e,c)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var l=t(1),u=c(t(2)),a=function(){var e=this;this.eventsToRecord=["click","change"],this.componentEventCache=[],this.previousComponent=null,this.previousMsg=null,this.start=function(){e.eventRecorder.start()},this.stop=function(){e.eventRecorder.stop()},this.clearEventCache=function(){e.componentEventCache=[]},this.reconcileEventCache=function(n){(n.target?l.findReactElement(n.target):null)!==e.previousComponent&&(e.componentEventCache.forEach((function(e){console.log("in the reconcile")})),e.clearEventCache())},this.removeMenusByClassname=function(e){var n=Array.from(document.getElementsByClassName(e));null==n||n.map((function(e){return e.remove()}))},this.removeSingleMenu=function(n){return r(e,void 0,void 0,(function(){var e;return i(this,(function(t){return null==(e=document.getElementById(n))||e.remove(),[2]}))}))},this.setupMenuDiv=function(e){var n="componentMenu"+(new Date).getTime(),t=document.createElement("DIV");return t.setAttribute("id",n),t.setAttribute("class","componentMenu"),document.body.appendChild(t),t.style.position="absolute",t.style.left=e.x+"px",t.style.top=e.y+"px",t.style.zIndex="9999999999999",n},this.appendButton=function(e,n){var t,o,r=document.createElement("BUTTON");r.style.width="150px",r.innerHTML=n,null===(t=document.getElementById(e))||void 0===t||t.appendChild(r);var i=document.createElement("br");return null===(o=document.getElementById(e))||void 0===o||o.appendChild(i),r},this.createPopupMenu=function(n,t){var o;e.removeMenusByClassname("componentMenu");var c=e.setupMenuDiv(t);null===(o=null==n?void 0:n.componentInfo)||void 0===o||o.map((function(t){var o,l;console.log("button val: ",t);var u=document.createElement("BUTTON");if(u.style.width="150px",u.innerHTML=null==t?void 0:t.componentName,u.innerHTML){u.addEventListener("click",(function(t){return r(e,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.componentMenuClick(t,c,n)];case 1:return[2,e.sent()]}}))}))})),null===(o=document.getElementById(c))||void 0===o||o.appendChild(u);var a=document.createElement("br");null===(l=document.getElementById(c))||void 0===l||l.appendChild(a)}})),e.appendButton(c,"Cancel").addEventListener("click",(function(){return r(e,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.removeSingleMenu(c)];case 1:return[2,e.sent()]}}))}))}))},this.createExistingTestMenu=function(n,t){return r(e,void 0,void 0,(function(){var e,t,o=this;return i(this,(function(c){return e=this.setupMenuDiv(n),["a","b"].map((function(n){var t,o,r=document.createElement("BUTTON");r.style.width="150px",r.innerHTML=n,null===(t=document.getElementById(e))||void 0===t||t.appendChild(r);var i=document.createElement("br");null===(o=document.getElementById(e))||void 0===o||o.appendChild(i)})),t=this.appendButton(e,"Create New Test"),this.appendButton(e,"Cancel").addEventListener("click",(function(){return r(o,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,this.removeSingleMenu(e)];case 1:return[2,n.sent()]}}))}))})),[2,{newTestBtn:t,existingTestMenuID:e}]}))}))},this.componentMenuClick=function(n,t,c){return r(e,void 0,void 0,(function(){var e,l,u,a,s=this;return i(this,(function(d){switch(d.label){case 0:return[4,this.removeSingleMenu(t)];case 1:return d.sent(),e=null===(a=c.componentInfo)||void 0===a?void 0:a.reduce((function(e,t){var r;return t.componentName===(null===(r=n.target)||void 0===r?void 0:r.innerHTML)?o({},t):e}),null),null==n||n.stopPropagation(),[4,this.checkForExistingTest(null==e?void 0:e.filename)];case 2:return l=d.sent(),[4,this.createExistingTestMenu(n,l)];case 3:return(u=d.sent()).newTestBtn.addEventListener("click",(function(){return r(s,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,this.createNewTest(o(o({},c),{componentInfo:e,checkedEvent:l.checkedEvent}))];case 1:return n.sent(),[4,this.removeSingleMenu(u.existingTestMenuID)];case 2:return n.sent(),[2]}}))}))})),[2]}}))}))},this.getMessage=function(e,n){var t,r,i,c=n.target||n.srcElement,u=c,a=c,s=l.getComponentInfo(e,10,[]),d=null===(r=null===(t=null==s?void 0:s.slice(0))||void 0===t?void 0:t.reverse())||void 0===r?void 0:r.reduce((function(e,n){var t;return(null===(t=n.props)||void 0===t?void 0:t.onClick)?o({},n):e}),null);return{action:n.type,checked:(null===(i=null==n?void 0:n.target)||void 0===i?void 0:i.hasOwnProperty("checked"))?u.checked:null,coordinates:l.getCoordinates(n),href:a.href?a.href:null,keyCode:n.keyCode?n.keyCode:null,tagName:u.tagName,tagType:u.type,textContent:u.textContent||u.innerText,timestamp:(new Date).getTime(),value:u.value,writeTestLocation:"",componentInfo:s,clickHandlerComponent:d,checkedEvent:void 0}},this.recordEvent=function(n){var t,o,r=n.target,i=n;if(!(null===(o=null===(t=null==r?void 0:r.parentElement)||void 0===t?void 0:t.getAttribute("id"))||void 0===o?void 0:o.includes("componentMenu"))&&n.target)try{if(e.previousMsg&&("change"===n.type||"click"===n.type)&&e.previousMsg&&"click"===e.previousMsg.action&&(new Date).getTime()-e.previousMsg.timestamp<100)return void console.log("message not send due to time");var c=l.findReactElement(n.target),u=e.getMessage(c,n);console.log("reactComponent and message in RECORD_EVENT: ",c,u),localStorage.setItem("lastEvent",JSON.stringify(u)),e.previousMsg=u,e.previousComponent=c,(null==i?void 0:i.metaKey)&&e.createPopupMenu(u,i)}catch(e){console.error("Error recording event",e)}},this.createNewTest=function(n){return r(e,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=window.dataLayer[0].apiKey,console.log("message: ",n),e||(e=1),[4,fetch("//localhost:3020/api/accounts/"+e+"/events/",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:window.location.href,event:n,placeholder:null})})];case 1:return[2,t.sent().json()]}}))}))},this.checkForExistingTest=function(n){return r(e,void 0,void 0,(function(){var e,t,o;return i(this,(function(r){switch(r.label){case 0:return(e=window.dataLayer[0].apiKey)||(e=1),t=encodeURI(n),o="//localhost:3020/api/accounts/"+e+"/events/?filepath="+t,console.log("url hit: ",o,t),[4,fetch(o,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"}})];case 1:return[2,r.sent().json()]}}))}))},this.eventRecorder=new u.default({recordEvents:this.eventsToRecord,eventCallback:this.recordEvent,reconcileCallback:this.reconcileEventCache})};n.default=a,window.eventRecorder=new a,window.eventRecorder.start()},function(e,n,t){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};function r(e,n){var t;if(void 0===n&&(n={}),!e)return l(n),n;var i=e.pendingProps?o(o({},n),e.pendingProps):n;return delete i.children,(null===(t=null==e?void 0:e.type)||void 0===t?void 0:t.__proto__)&&["Component","PureComponent"].includes(e.type.__proto__.name)?(l(i),i):r(e._debugOwner,i)}function i(e){return e?e.elementType&&e.elementType.name?e.elementType.name:e.elementType&&e.elementType.displayName?e.elementType.displayName:e.type.displayName?e.type.displayName:e.type.name?e.type.name:i(e._debugOwner):null}Object.defineProperty(n,"__esModule",{value:!0}),n.functionStringify=n.findReactElement=n.findReactElementDURKA=n.getCoordinates=n.getComponentName=n.getComponentProps=n.getComponentInfo=void 0,n.getComponentInfo=function e(n,t,o){var c,l,u,a,s;if(console.log("getComponentInfo: ",n,o),!n||0===t)return o;if(null===(c=null==n?void 0:n._debugSource)||void 0===c?void 0:c.fileName){var d=r(null==n?void 0:n._debugOwner),v=i(null==n?void 0:n._debugOwner);return o.push({filename:null===(l=null==n?void 0:n._debugSource)||void 0===l?void 0:l.fileName,linenumber:null===(u=null==n?void 0:n._debugSource)||void 0===u?void 0:u.lineNumber,props:d,componentName:"Component"===v?null===(s=null===(a=null==n?void 0:n._debugSource)||void 0===a?void 0:a.fileName)||void 0===s?void 0:s.split("\\").pop().split("/").pop().split(".")[0]:v}),e(null==n?void 0:n._debugOwner,t-1,o)}return e(null==n?void 0:n._debugOwner,t-1,o)},n.getComponentProps=r,n.getComponentName=i;var c={mouseup:!0,mousedown:!0,mousemove:!0,mouseover:!0};function l(e){for(var n in e)if(e[n]&&"[object Function]"==={}.toString.call(e[n]))try{e[n]="[Function]"}catch(e){console.error("Error stringifying prop",e)}!function(e){for(var n=Object.keys(e),t=0,o=n;t<o.length;t++){var r=o[t];"[object Object]"!==Object.prototype.toString.call(e[r])||!e[r].hasOwnProperty("_owner")&&"inputRef"!==r&&"InputProps"!==r||delete e[r]}}(e)}n.getCoordinates=function(e){var n=e;return c[e.type]?{x:n.clientX,y:n.clientY}:null},n.findReactElementDURKA=function(e){var n=Object.keys(e).find((function(e){return e.startsWith("__reactInternalInstance$")})),t=n?e[n]:null;return null==t?null:t},n.findReactElement=function(e){var n=e;for(var t in n)if(t.startsWith("__reactInternalInstance$"))return n[t];return null},n.functionStringify=l},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(e){var n=this;this.recordEvents=[],this.reconcileEvents=["blur","focus","change"],this.addAllListeners=function(){n.recordEvents.forEach((function(e){window.addEventListener(e,n.eventCallback,!0)})),n.reconcileEvents.forEach((function(e){window.addEventListener(e,n.reconcileCallback,!0)}))},this.removeAllListeners=function(){n.recordEvents.forEach((function(e){window.removeEventListener(e,n.eventCallback,!0)})),n.reconcileEvents.forEach((function(e){window.removeEventListener(e,n.reconcileCallback,!0)}))},this.start=function(){window.recorderAddedControlListeners||(n.addAllListeners(),window.recorderAddedControlListeners=!0)},this.stop=function(){window.recorderAddedControlListeners&&(n.removeAllListeners(),window.recorderAddedControlListeners=!1)};var t=e.eventCallback,o=e.reconcileCallback,r=e.recordEvents,i=e.reconcileEvents,c=void 0===i?null:i;this.eventCallback=t,this.reconcileCallback=o,this.recordEvents=r,c&&(this.reconcileEvents=c)};n.default=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsaWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2V2ZW50LXJlY29yZGVyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZXZlbnRzVG9SZWNvcmQiLCJjb21wb25lbnRFdmVudENhY2hlIiwicHJldmlvdXNDb21wb25lbnQiLCJwcmV2aW91c01zZyIsInN0YXJ0IiwiZXZlbnRSZWNvcmRlciIsInN0b3AiLCJjbGVhckV2ZW50Q2FjaGUiLCJyZWNvbmNpbGVFdmVudENhY2hlIiwiZXZlbnQiLCJ0YXJnZXQiLCJmaW5kUmVhY3RFbGVtZW50IiwiZm9yRWFjaCIsIm1zZyIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmVNZW51c0J5Q2xhc3NuYW1lIiwiY2xhc3NuYW1lIiwicHJldmlvdXNNZW51cyIsIkFycmF5IiwiZnJvbSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsIm1hcCIsInZhbCIsInJlbW92ZSIsInJlbW92ZVNpbmdsZU1lbnUiLCJlbElEIiwibWVudURpdiIsImdldEVsZW1lbnRCeUlkIiwic2V0dXBNZW51RGl2IiwibW91c2VFdmVudCIsImRpdklEIiwiRGF0ZSIsImdldFRpbWUiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYm9keSIsImFwcGVuZENoaWxkIiwic3R5bGUiLCJwb3NpdGlvbiIsImxlZnQiLCJ4IiwidG9wIiwieSIsInpJbmRleCIsImFwcGVuZEJ1dHRvbiIsImxhYmVsIiwiYnRuIiwid2lkdGgiLCJpbm5lckhUTUwiLCJiciIsImNyZWF0ZVBvcHVwTWVudSIsIm1lc3NhZ2UiLCJjb21wb25lbnRJbmZvIiwiY29tcG9uZW50TmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0aGlzIiwiY29tcG9uZW50TWVudUNsaWNrIiwiY3JlYXRlRXhpc3RpbmdUZXN0TWVudSIsImV4aXN0aW5nVGVzdFJlc3BvbnNlIiwiZXhpc3RpbmdUZXN0RGl2SUQiLCJuZXdUZXN0QnRuIiwiZXhpc3RpbmdUZXN0TWVudUlEIiwic2VsZWN0ZWRDb21wb25lbnQiLCJyZWR1Y2UiLCJhY2MiLCJjdXJyIiwic3RvcFByb3BhZ2F0aW9uIiwiY2hlY2tGb3JFeGlzdGluZ1Rlc3QiLCJmaWxlbmFtZSIsImV4aXN0aW5nVGVzdE1lbnVSZXNwb25zZSIsImNyZWF0ZU5ld1Rlc3QiLCJjaGVja2VkRXZlbnQiLCJnZXRNZXNzYWdlIiwicmVhY3RDb21wb25lbnQiLCJzcmNFbGVtZW50IiwiaW5wdXRUYXJnZXQiLCJsaW5rVGFyZ2V0IiwiZ2V0Q29tcG9uZW50SW5mbyIsImNsaWNrSGFuZGxlciIsInNsaWNlIiwicmV2ZXJzZSIsImFjY3VtdWxhdG9yIiwiY3VycmVudFZhbHVlIiwicHJvcHMiLCJvbkNsaWNrIiwiYWN0aW9uIiwidHlwZSIsImNoZWNrZWQiLCJjb29yZGluYXRlcyIsImdldENvb3JkaW5hdGVzIiwiaHJlZiIsImtleUNvZGUiLCJ0YWdOYW1lIiwidGFnVHlwZSIsInRleHRDb250ZW50IiwiaW5uZXJUZXh0IiwidGltZXN0YW1wIiwid3JpdGVUZXN0TG9jYXRpb24iLCJjbGlja0hhbmRsZXJDb21wb25lbnQiLCJ1bmRlZmluZWQiLCJyZWNvcmRFdmVudCIsIm5vZGVUYXJnZXQiLCJwYXJlbnRFbGVtZW50IiwiZ2V0QXR0cmlidXRlIiwiaW5jbHVkZXMiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1ldGFLZXkiLCJlIiwiZXJyb3IiLCJhY2NvdW50SWQiLCJ3aW5kb3ciLCJmZXRjaCIsIm1ldGhvZCIsImNhY2hlIiwiY3JlZGVudGlhbHMiLCJoZWFkZXJzIiwidXJsIiwibG9jYXRpb24iLCJwbGFjZWhvbGRlciIsImpzb24iLCJmaWxlcGF0aCIsInVyaUZpbGVwYXRoIiwiZW5jb2RlVVJJIiwicmVjb3JkRXZlbnRzIiwiZXZlbnRDYWxsYmFjayIsInJlY29uY2lsZUNhbGxiYWNrIiwiQXNzZXJ0bHlDbGllbnQiLCJnZXRDb21wb25lbnRQcm9wcyIsImNvbXBvbmVudCIsImZ1bmN0aW9uU3RyaW5naWZ5IiwibmV3UHJvcHMiLCJwZW5kaW5nUHJvcHMiLCJjaGlsZHJlbiIsIl9fcHJvdG9fXyIsIl9kZWJ1Z093bmVyIiwiZ2V0Q29tcG9uZW50TmFtZSIsImZpYmVyIiwiZWxlbWVudFR5cGUiLCJkaXNwbGF5TmFtZSIsIm1heE5lc3QiLCJyZXN1bHRBcnJheSIsIl9kZWJ1Z1NvdXJjZSIsImZpbGVOYW1lIiwicHVzaCIsImxpbmVudW1iZXIiLCJsaW5lTnVtYmVyIiwic3BsaXQiLCJwb3AiLCJldmVudHNXaXRoQ29vcmRpbmF0ZXMiLCJtb3VzZXVwIiwibW91c2Vkb3duIiwibW91c2Vtb3ZlIiwibW91c2VvdmVyIiwib2JqIiwiayIsInRvU3RyaW5nIiwia2V5cyIsInN0cmlwRXh0cmFDb21wb25lbnRQcm9wcyIsImNsaWVudFgiLCJjbGllbnRZIiwiZmluZCIsInN0YXJ0c1dpdGgiLCJpbnRlcm5hbEluc3RhbmNlIiwidGFyZ2V0TWFwIiwiY29uZmlnIiwicmVjb25jaWxlRXZlbnRzIiwiYWRkQWxsTGlzdGVuZXJzIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlY29y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QVEsUUFBUyxVQWlCN0QsS0FBQUMsZ0JBQWtCLFdBQ2hCLEVBQUszQyxhQUFhcEgsU0FBUSxTQUFDSCxHQUN6QjBHLE9BQU8zRCxpQkFBaUIvQyxFQUFPLEVBQUt3SCxlQUFlLE1BR3JELEVBQUt5QyxnQkFBZ0I5SixTQUFRLFNBQUNILEdBQzVCMEcsT0FBTzNELGlCQUFpQi9DLEVBQU8sRUFBS3lILG1CQUFtQixPQUkzRCxLQUFBMEMsbUJBQXFCLFdBQ25CLEVBQUs1QyxhQUFhcEgsU0FBUSxTQUFDSCxHQUN6QjBHLE9BQU8wRCxvQkFBb0JwSyxFQUFPLEVBQUt3SCxlQUFlLE1BRXhELEVBQUt5QyxnQkFBZ0I5SixTQUFRLFNBQUNILEdBQzVCMEcsT0FBTzBELG9CQUFvQnBLLEVBQU8sRUFBS3lILG1CQUFtQixPQUk5RCxLQUFBOUgsTUFBUSxXQUNEK0csT0FBTzJELGdDQUNWLEVBQUtILGtCQUNMeEQsT0FBTzJELCtCQUFnQyxJQUkzQyxLQUFBeEssS0FBTyxXQUNENkcsT0FBTzJELGdDQUNULEVBQUtGLHFCQUNMekQsT0FBTzJELCtCQUFnQyxJQTFDdkMsSUFBQTdDLEVBSUV3QyxFQUFNLGNBSFJ2QyxFQUdFdUMsRUFBTSxrQkFGUnpDLEVBRUV5QyxFQUFNLGFBRFIsRUFDRUEsRUFBTSxnQkFEUkMsT0FBZSxJQUFHLE9BQUksRUFFeEJqSCxLQUFLd0UsY0FBZ0JBLEVBQ3JCeEUsS0FBS3lFLGtCQUFvQkEsRUFDekJ6RSxLQUFLdUUsYUFBZUEsRUFDaEIwQyxJQUNGakgsS0FBS2lILGdCQUFrQkEsSSIsImZpbGUiOiJhc3NlcnRseS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7XG4gIGZpbmRSZWFjdEVsZW1lbnQsXG4gIGdldENvb3JkaW5hdGVzLFxuICBnZXRDb21wb25lbnROYW1lLFxuICBnZXRDb21wb25lbnRQcm9wcyxcbiAgZ2V0Q29tcG9uZW50SW5mb1xufSBmcm9tIFwiLi91dGlsc1wiO1xuXG5cbmltcG9ydCBFdmVudFJlY29yZGVyIGZyb20gXCIuL2V2ZW50LXJlY29yZGVyXCI7XG5pbXBvcnQgQ2xpZW50SW50ZXJmYWNlIGZyb20gXCIuL3R5cGVzL0NsaWVudFwiO1xuaW1wb3J0IE1lc3NhZ2UgZnJvbSBcIi4vdHlwZXMvTWVzc2FnZVwiO1xuaW1wb3J0IHsgRXZlbnRUeXBlIH0gZnJvbSBcIi4vdHlwZXMvRXZlbnRUeXBlXCI7XG5cbmludGVyZmFjZSBDb21wb25lbnQge1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBc3NlcnRseUNsaWVudCBpbXBsZW1lbnRzIENsaWVudEludGVyZmFjZSB7XG4gIGV2ZW50c1RvUmVjb3JkOiBFdmVudFR5cGVbXSA9IFtcImNsaWNrXCIsIFwiY2hhbmdlXCJdO1xuXG4gIHByaXZhdGUgZXZlbnRSZWNvcmRlcjogRXZlbnRSZWNvcmRlcjtcbiAgcHJpdmF0ZSBjb21wb25lbnRFdmVudENhY2hlOiBNZXNzYWdlW10gPSBbXTtcbiAgcHJpdmF0ZSBwcmV2aW91c0NvbXBvbmVudDogQ29tcG9uZW50IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcHJldmlvdXNNc2c6IE1lc3NhZ2UgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmV2ZW50UmVjb3JkZXIgPSBuZXcgRXZlbnRSZWNvcmRlcih7XG4gICAgICByZWNvcmRFdmVudHM6IHRoaXMuZXZlbnRzVG9SZWNvcmQsXG4gICAgICBldmVudENhbGxiYWNrOiB0aGlzLnJlY29yZEV2ZW50LFxuICAgICAgcmVjb25jaWxlQ2FsbGJhY2s6IHRoaXMucmVjb25jaWxlRXZlbnRDYWNoZSxcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXJ0ID0gKCkgPT4ge1xuICAgIHRoaXMuZXZlbnRSZWNvcmRlci5zdGFydCgpO1xuICB9O1xuXG4gIHN0b3AgPSAoKSA9PiB7XG4gICAgdGhpcy5ldmVudFJlY29yZGVyLnN0b3AoKTtcbiAgfTtcblxuICBjbGVhckV2ZW50Q2FjaGUgPSAoKSA9PiB7XG4gICAgdGhpcy5jb21wb25lbnRFdmVudENhY2hlID0gW107XG4gIH07XG5cbiAgcmVjb25jaWxlRXZlbnRDYWNoZSA9IChldmVudDogRXZlbnQpID0+IHtcbiAgICBjb25zdCByZWFjdENvbXBvbmVudCA9IGV2ZW50LnRhcmdldCA/IGZpbmRSZWFjdEVsZW1lbnQoZXZlbnQudGFyZ2V0KSA6IG51bGw7XG4gICAgaWYgKHJlYWN0Q29tcG9uZW50ICE9PSB0aGlzLnByZXZpb3VzQ29tcG9uZW50KSB7XG4gICAgICB0aGlzLmNvbXBvbmVudEV2ZW50Q2FjaGUuZm9yRWFjaCgobXNnKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdpbiB0aGUgcmVjb25jaWxlJyk7XG4gICAgICAgIC8vIHRoaXMuc2VuZEV2ZW50KG1zZyk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuY2xlYXJFdmVudENhY2hlKCk7XG4gICAgfVxuICB9O1xuXG4gIC8vIHJlbW92ZSBhbGwgZGl2cyB3aXRoIGEgY2VydGFpbiBjbGFzc25hbWVcbiAgcmVtb3ZlTWVudXNCeUNsYXNzbmFtZSA9IChjbGFzc25hbWU6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHByZXZpb3VzTWVudXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NuYW1lKSk7XG4gICAgcHJldmlvdXNNZW51cz8ubWFwKCh2YWw6IGFueSkgPT4gdmFsLnJlbW92ZSgpKTtcbiAgfVxuXG4gIHJlbW92ZVNpbmdsZU1lbnUgPSBhc3luYyAoZWxJRDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbWVudURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsSUQpO1xuICAgIG1lbnVEaXY/LnJlbW92ZSgpO1xuICB9O1xuXG4gIHNldHVwTWVudURpdiA9IChtb3VzZUV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgY29uc3QgZXZlbnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgY29uc3QgZGl2SUQgPSBcImNvbXBvbmVudE1lbnVcIiArIGV2ZW50VGltZTtcbiAgICBjb25zdCBtZW51RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKTtcblxuICAgIG1lbnVEaXYuc2V0QXR0cmlidXRlKFwiaWRcIiwgZGl2SUQpO1xuICAgIG1lbnVEaXYuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgJ2NvbXBvbmVudE1lbnUnKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1lbnVEaXYpO1xuICAgIG1lbnVEaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgbWVudURpdi5zdHlsZS5sZWZ0ID0gbW91c2VFdmVudC54ICsgJ3B4JztcbiAgICBtZW51RGl2LnN0eWxlLnRvcCA9IG1vdXNlRXZlbnQueSArICdweCc7XG4gICAgbWVudURpdi5zdHlsZS56SW5kZXggPSAnOTk5OTk5OTk5OTk5OSc7XG4gICAgcmV0dXJuIGRpdklEXG4gIH1cblxuICBhcHBlbmRCdXR0b24gPSAoZWxJRDpzdHJpbmcgLCBsYWJlbDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkJVVFRPTlwiKTtcbiAgICBidG4uc3R5bGUud2lkdGggPSAnMTUwcHgnO1xuICAgIGJ0bi5pbm5lckhUTUwgPSBsYWJlbDtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbElEKT8uYXBwZW5kQ2hpbGQoYnRuKTtcbiAgICBjb25zdCBiciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbElEKT8uYXBwZW5kQ2hpbGQoYnIpO1xuICAgIHJldHVybiBidG5cbiAgfVxuXG4gIGNyZWF0ZVBvcHVwTWVudSA9IChtZXNzYWdlOiBNZXNzYWdlLCBtb3VzZUV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG5cbiAgICAvLyByZW1vdmUgYWxsIGV4aXN0aW5nIG1lbnVzXG4gICAgdGhpcy5yZW1vdmVNZW51c0J5Q2xhc3NuYW1lKCdjb21wb25lbnRNZW51JylcbiAgICAvLyBjcmVhdGUgdGhlIGRvbSBlbGVtZW50IGFuZCBzdG9yZSB0aGUgZWxlbWVudCBJRFxuICAgIGNvbnN0IGRpdklEID0gdGhpcy5zZXR1cE1lbnVEaXYobW91c2VFdmVudCkgICAgXG5cbiAgICBtZXNzYWdlPy5jb21wb25lbnRJbmZvPy5tYXAoKHZhbDogYW55KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcImJ1dHRvbiB2YWw6IFwiLCB2YWwpO1xuICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkJVVFRPTlwiKTtcbiAgICAgIGJ0bi5zdHlsZS53aWR0aCA9ICcxNTBweCc7XG4gICAgICBidG4uaW5uZXJIVE1MID0gdmFsPy5jb21wb25lbnROYW1lO1xuICAgICAgaWYgKGJ0bi5pbm5lckhUTUwpIHtcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2ZW50KSA9PiBhd2FpdCB0aGlzLmNvbXBvbmVudE1lbnVDbGljayhldmVudCwgZGl2SUQsIG1lc3NhZ2UpKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGl2SUQpPy5hcHBlbmRDaGlsZChidG4pO1xuICAgICAgICBjb25zdCBiciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGl2SUQpPy5hcHBlbmRDaGlsZChicik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgQ2FuY2VsQnRuID0gdGhpcy5hcHBlbmRCdXR0b24oZGl2SUQsICdDYW5jZWwnKVxuICAgIENhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IGF3YWl0IHRoaXMucmVtb3ZlU2luZ2xlTWVudShkaXZJRCkpO1xuXG4gIH07XG5cbiAgY3JlYXRlRXhpc3RpbmdUZXN0TWVudSA9IGFzeW5jIChldmVudDogYW55LCBleGlzdGluZ1Rlc3RSZXNwb25zZTogYW55KSA9PiB7XG4gICBcbiAgICBjb25zdCBleGlzdGluZ1Rlc3REaXZJRCA9IHRoaXMuc2V0dXBNZW51RGl2KGV2ZW50KSAgXG4gICAgY29uc3QgdGVzdCA9IFtcImFcIixcImJcIl1cblxuICAgIHRlc3QubWFwKCB2YWwgPT4ge1xuICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkJVVFRPTlwiKTtcbiAgICAgIGJ0bi5zdHlsZS53aWR0aCA9ICcxNTBweCc7XG4gICAgICBidG4uaW5uZXJIVE1MID0gdmFsO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZXhpc3RpbmdUZXN0RGl2SUQpPy5hcHBlbmRDaGlsZChidG4pO1xuICAgICAgY29uc3QgYnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIik7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChleGlzdGluZ1Rlc3REaXZJRCk/LmFwcGVuZENoaWxkKGJyKTtcbiAgICB9KVxuICAgIGNvbnN0IG5ld1Rlc3RCdG4gPSB0aGlzLmFwcGVuZEJ1dHRvbihleGlzdGluZ1Rlc3REaXZJRCwgJ0NyZWF0ZSBOZXcgVGVzdCcpXG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSB0aGlzLmFwcGVuZEJ1dHRvbihleGlzdGluZ1Rlc3REaXZJRCwgJ0NhbmNlbCcpXG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5yZW1vdmVTaW5nbGVNZW51KGV4aXN0aW5nVGVzdERpdklEKSk7XG5cbiAgICByZXR1cm4ge25ld1Rlc3RCdG46IG5ld1Rlc3RCdG4sIGV4aXN0aW5nVGVzdE1lbnVJRDogZXhpc3RpbmdUZXN0RGl2SUR9XG4gIH1cblxuICBjb21wb25lbnRNZW51Q2xpY2sgPSBhc3luYyAoZXZlbnQ6IGFueSwgZGl2SUQ6IGFueSwgbWVzc2FnZTogTWVzc2FnZSk6IFByb21pc2U8YW55PiA9PiB7XG5cbiAgICBhd2FpdCB0aGlzLnJlbW92ZVNpbmdsZU1lbnUoZGl2SUQpO1xuXG4gICAgY29uc3Qgc2VsZWN0ZWRDb21wb25lbnQgPSBtZXNzYWdlLmNvbXBvbmVudEluZm8/LnJlZHVjZShcbiAgICAgIChhY2M6IGFueSwgY3VycjogYW55KSA9PiB7XG4gICAgICAgIGlmIChjdXJyLmNvbXBvbmVudE5hbWUgPT09IGV2ZW50LnRhcmdldD8uaW5uZXJIVE1MKSB7XG4gICAgICAgICAgcmV0dXJuIHsuLi5jdXJyfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9XG4gICAgICB9LCBudWxsKTtcblxuICAgIGV2ZW50Py5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBcbiAgICAvLyBjaGVjayBmb3IgZXhpc3RpbmcgdGVzdHNcbiAgICBjb25zdCBleGlzdGluZ1Rlc3RSZXNwb25zZSA9IGF3YWl0IHRoaXMuY2hlY2tGb3JFeGlzdGluZ1Rlc3Qoc2VsZWN0ZWRDb21wb25lbnQ/LmZpbGVuYW1lKTtcbiAgICBcbiAgICAvLyB0aGUgcmVzcG9uc2Ugd2lsbCBjb250YWluIHRoZSBkb20gZWxlbWVudHMgb2YgdGhlIGJ1dHRvbnMgZm9yIGVpdGhlciB0aGUgZXhpc3RpbmcgdGVzdHMgb3JcbiAgICAvLyB0byBjcmVhdGUgYSBuZXcgdGVzdFxuICAgIGNvbnN0IGV4aXN0aW5nVGVzdE1lbnVSZXNwb25zZSA9IGF3YWl0IHRoaXMuY3JlYXRlRXhpc3RpbmdUZXN0TWVudShldmVudCwgZXhpc3RpbmdUZXN0UmVzcG9uc2UpXG5cbiAgICAvLyBhZGQgbGlzdGVuZXIgZm9yIGNyZWF0aW5nIGEgYnJhbmQgbmV3IHRlc3RcbiAgICBleGlzdGluZ1Rlc3RNZW51UmVzcG9uc2UubmV3VGVzdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlTmV3VGVzdCh7XG4gICAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICAgIGNvbXBvbmVudEluZm86IHNlbGVjdGVkQ29tcG9uZW50LFxuICAgICAgICBjaGVja2VkRXZlbnQ6IGV4aXN0aW5nVGVzdFJlc3BvbnNlLmNoZWNrZWRFdmVudFxuICAgICAgfSlcbiAgICAgIGF3YWl0IHRoaXMucmVtb3ZlU2luZ2xlTWVudShleGlzdGluZ1Rlc3RNZW51UmVzcG9uc2UuZXhpc3RpbmdUZXN0TWVudUlEKTtcbiAgICB9KTtcblxuICAgIC8vIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAvLyAgIC4uLm1lc3NhZ2UsXG4gICAgLy8gICAvLyB0aGVyZSBzaG91bGQgb25seSBiZSBvbmUgbWF0Y2ggaGVyZSBvbiB0aGUgZmlsdGVyXG4gICAgLy8gICAvLyBjb21wb25lbnRJbmZvOiBtZXNzYWdlLmNvbXBvbmVudEluZm8/LmZpbHRlciggKHZhbDphbnkpID0+IHZhbC5jb21wb25lbnROYW1lID09PSBldmVudC50YXJnZXQ/LmlubmVySFRNTClcbiAgICAvLyAgIGNvbXBvbmVudEluZm86IHNlbGVjdGVkQ29tcG9uZW50XG4gICAgLy8gfSkudGhlbihyZXMgPT4ge2NvbnNvbGUubG9nKCdkb3QgdGhlbicsIHJlcyl9KTtcblxuXG4gIH07XG5cblxuXG4gIGdldE1lc3NhZ2UgPSAocmVhY3RDb21wb25lbnQ6IGFueSwgZXZlbnQ6IEtleWJvYXJkRXZlbnQgfCBFdmVudCk6IE1lc3NhZ2UgPT4ge1xuXG4gICAgLy8gZnVuY3Rpb24gdG8gdXNlIGluIGFycmF5IHJlZHVjZVxuICAgIGNvbnN0IGZpbmRDbGlja0hhbmRsZXIgPSAoYWNjdW11bGF0b3I6IGFueSwgY3VycmVudFZhbHVlOiBhbnkpID0+IHtcbiAgICAgIGlmIChjdXJyZW50VmFsdWUucHJvcHM/Lm9uQ2xpY2spIHtcbiAgICAgICAgcmV0dXJuIHsuLi5jdXJyZW50VmFsdWV9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudDtcbiAgICBjb25zdCBpbnB1dFRhcmdldCA9IHRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGNvbnN0IGxpbmtUYXJnZXQgPSB0YXJnZXQgYXMgSFRNTExpbmtFbGVtZW50O1xuXG4gICAgY29uc3QgY29tcG9uZW50SW5mbyA9IGdldENvbXBvbmVudEluZm8ocmVhY3RDb21wb25lbnQsIDEwLCBbXSk7XG5cbiAgICAvLyBmaW5kIHRoZSBjbG9zZXN0IGNsaWNrIGhhbmRsZXIgdGhhdCB3b3VsZCBoYXZlIGJlZW4gdHJpZ2dlcmVkXG4gICAgLy8gbm90ZSwgc2xpY2UoMCkgY29waWVzIHRoZSBhcnJheVxuICAgIGNvbnN0IGNsaWNrSGFuZGxlciA9IGNvbXBvbmVudEluZm8/LnNsaWNlKDApPy5yZXZlcnNlKCk/LnJlZHVjZShmaW5kQ2xpY2tIYW5kbGVyLCBudWxsKTtcblxuXG4gICAgLy8gY29uc29sZS5sb2coJ2NvbXBvbmVudCBpbmZvIGluIEdFVF9NRVNTQUdFOiAnLCBjb21wb25lbnRJbmZvLCBjbGlja0hhbmRsZXIpXG5cbiAgICBjb25zdCBtZXNzYWdlOiBNZXNzYWdlID0ge1xuICAgICAgLy8gY29tcG9uZW50TmFtZSwgZmlsZU5hbWUsIGFuZCBsaW5lTnVtYmVyIGFyZSBhbHJlYWR5IGluIHRoZSBvYmplY3QgcmV0dXJuZWRcbiAgICAgIGFjdGlvbjogZXZlbnQudHlwZSxcbiAgICAgIGNoZWNrZWQ6IGV2ZW50Py50YXJnZXQ/Lmhhc093blByb3BlcnR5KFwiY2hlY2tlZFwiKVxuICAgICAgICA/IGlucHV0VGFyZ2V0LmNoZWNrZWRcbiAgICAgICAgOiBudWxsLFxuICAgICAgY29vcmRpbmF0ZXM6IGdldENvb3JkaW5hdGVzKGV2ZW50KSxcbiAgICAgIGhyZWY6IGxpbmtUYXJnZXQuaHJlZiA/IGxpbmtUYXJnZXQuaHJlZiA6IG51bGwsXG4gICAgICBrZXlDb2RlOiAoZXZlbnQgYXMgS2V5Ym9hcmRFdmVudCkua2V5Q29kZVxuICAgICAgICA/IChldmVudCBhcyBLZXlib2FyZEV2ZW50KS5rZXlDb2RlXG4gICAgICAgIDogbnVsbCxcbiAgICAgIHRhZ05hbWU6IGlucHV0VGFyZ2V0LnRhZ05hbWUsXG4gICAgICB0YWdUeXBlOiBpbnB1dFRhcmdldC50eXBlLFxuICAgICAgdGV4dENvbnRlbnQ6IGlucHV0VGFyZ2V0LnRleHRDb250ZW50IHx8IGlucHV0VGFyZ2V0LmlubmVyVGV4dCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS5nZXRUaW1lKCksXG4gICAgICB2YWx1ZTogaW5wdXRUYXJnZXQudmFsdWUsXG4gICAgICB3cml0ZVRlc3RMb2NhdGlvbjogJycsXG4gICAgICBjb21wb25lbnRJbmZvOiBjb21wb25lbnRJbmZvLFxuICAgICAgY2xpY2tIYW5kbGVyQ29tcG9uZW50OiBjbGlja0hhbmRsZXIsXG4gICAgICBjaGVja2VkRXZlbnQ6IHVuZGVmaW5lZFxuXG4gICAgfTtcblxuICAgIHJldHVybiBtZXNzYWdlO1xuICB9O1xuXG5cbiAgcmVjb3JkRXZlbnQgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgY29uc3Qgbm9kZVRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBOb2RlO1xuICAgIGNvbnN0IG1vdXNlRXZlbnQgPSBldmVudCBhcyBNb3VzZUV2ZW50O1xuXG4gICAgLy8gaWYgdGhlIGNsaWNrIGlzIG9uIGEgbWVudSB0aGF0IHBvcHMgdXAsIGRvbnQgZ28gdGhyb3VnaCB0aGUgcmVjb3JkIGV2ZW50IGxvZ2ljXG4gICAgaWYgKG5vZGVUYXJnZXQ/LnBhcmVudEVsZW1lbnQ/LmdldEF0dHJpYnV0ZShcImlkXCIpPy5pbmNsdWRlcygnY29tcG9uZW50TWVudScpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghZXZlbnQudGFyZ2V0KSByZXR1cm47XG5cbiAgICB0cnkge1xuICAgICAgaWYgKHRoaXMucHJldmlvdXNNc2cpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIChldmVudC50eXBlID09PSBcImNoYW5nZVwiIHx8IGV2ZW50LnR5cGUgPT09IFwiY2xpY2tcIikgJiZcbiAgICAgICAgICB0aGlzLnByZXZpb3VzTXNnICYmXG4gICAgICAgICAgdGhpcy5wcmV2aW91c01zZy5hY3Rpb24gPT09IFwiY2xpY2tcIiAmJlxuICAgICAgICAgIG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGhpcy5wcmV2aW91c01zZy50aW1lc3RhbXAgPCAxMDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJtZXNzYWdlIG5vdCBzZW5kIGR1ZSB0byB0aW1lXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZWFjdENvbXBvbmVudCA9IGZpbmRSZWFjdEVsZW1lbnQoZXZlbnQudGFyZ2V0KTtcbiAgICAgIGNvbnN0IG1zZzogTWVzc2FnZSA9IHRoaXMuZ2V0TWVzc2FnZShyZWFjdENvbXBvbmVudCwgZXZlbnQpO1xuICAgICAgY29uc29sZS5sb2coJ3JlYWN0Q29tcG9uZW50IGFuZCBtZXNzYWdlIGluIFJFQ09SRF9FVkVOVDogJywgcmVhY3RDb21wb25lbnQsIG1zZyk7XG5cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibGFzdEV2ZW50XCIsIEpTT04uc3RyaW5naWZ5KG1zZykpO1xuICAgICAgdGhpcy5wcmV2aW91c01zZyA9IG1zZztcblxuICAgICAgLy8gaWYgKFxuICAgICAgLy8gICAvLyBpZiB0aGVyZSBpcyBubyBwcmV2aW91cyBjb21wb25lbnQgb3IgdGhlIHByZXZpb3VzIGNvbXBvbmVudCBpcyB0aGUgc2FtZSBhcyB0aGUgY29tcG9uZW50IHlvdSBqdXN0IGNsaWNrZWQgb25cbiAgICAgIC8vICAgIXRoaXMucHJldmlvdXNDb21wb25lbnQgfHxcbiAgICAgIC8vICAgKHRoaXMucHJldmlvdXNDb21wb25lbnQgJiYgdGhpcy5wcmV2aW91c0NvbXBvbmVudCA9PT0gcmVhY3RDb21wb25lbnQpXG4gICAgICAvLyApIHtcbiAgICAgIC8vICAgdGhpcy5wcmV2aW91c0NvbXBvbmVudCA9IHJlYWN0Q29tcG9uZW50O1xuICAgICAgLy8gICBpZiAoXG4gICAgICAvLyAgICAgdGhpcy5wcmV2aW91c0NvbXBvbmVudCAmJlxuICAgICAgLy8gICAgIG1zZy5jaGVja2VkICE9PSBudWxsICYmXG4gICAgICAvLyAgICAgbXNnLmFjdGlvbiA9PT0gXCJjbGlja1wiXG4gICAgICAvLyAgICkge1xuICAgICAgLy8gICAgIC8vIG1lc3NhZ2UgaXMgc2VudCB3aGVuIHNvbWV0aGluZyBpbiB0aGUgcG9wdXAgbWVudSBpcyBzZWxlY3RlZFxuICAgICAgLy8gICAgIHRoaXMuY3JlYXRlUG9wdXBNZW51KG1zZyk7XG4gICAgICAvLyAgICAgLy8gdGhpcy5zZW5kRXZlbnQobXNnKTtcbiAgICAgIC8vICAgICByZXR1cm47XG4gICAgICAvLyAgIH1cblxuICAgICAgLy8gICAvL3B1c2hpbmcgYSBtZXNzYWdlIHRvIHRoZSBldmVudCBjYWNoZSBzZW5kcyBpdCB0byB0aGUgYXBpIHdoZW4gdGhlIHJlY29uY2lsZSBjYWxsYmFjayBpcyBjYWxsZWRcbiAgICAgIC8vICAgdGhpcy5jb21wb25lbnRFdmVudENhY2hlLnB1c2gobXNnKTtcblxuICAgICAgLy8gICByZXR1cm47XG4gICAgICAvLyB9IGVsc2Uge1xuICAgICAgLy8gICB0aGlzLmNsZWFyRXZlbnRDYWNoZSgpO1xuICAgICAgLy8gfVxuXG4gICAgICB0aGlzLnByZXZpb3VzQ29tcG9uZW50ID0gcmVhY3RDb21wb25lbnQ7XG5cbiAgICAgIC8vIG1lc3NhZ2UgaXMgc2VudCB3aGVuIHNvbWV0aGluZyBpbiB0aGUgcG9wdXAgbWVudSBpcyBzZWxlY3RlZFxuICAgICAgaWYgKG1vdXNlRXZlbnQ/Lm1ldGFLZXkpIHRoaXMuY3JlYXRlUG9wdXBNZW51KG1zZywgbW91c2VFdmVudCk7XG4gICAgICAvLyB0aGlzLnNlbmRFdmVudChtc2cpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZWNvcmRpbmcgZXZlbnRcIiwgZSk7XG4gICAgfVxuICB9O1xuXG4gIGNyZWF0ZU5ld1Rlc3QgPSBhc3luYyAobWVzc2FnZTogTWVzc2FnZSkgPT4ge1xuICAgIGxldCBhY2NvdW50SWQgPSAod2luZG93IGFzIHsgW2tleTogc3RyaW5nXTogYW55IH0pW1wiZGF0YUxheWVyXCJdWzBdW1wiYXBpS2V5XCJdO1xuXG4gICAgY29uc29sZS5sb2coJ21lc3NhZ2U6ICcsIG1lc3NhZ2UgKTtcblxuICAgIC8vIHJhdGhlciBnZXQgYSA0MDMgdGhhbiBhIGJhZCByb3V0ZVxuICAgIGlmICghYWNjb3VudElkKSB7XG4gICAgICBhY2NvdW50SWQgPSAxO1xuICAgIH1cblxuICAgIGNvbnN0IHVybCA9IGAvL2xvY2FsaG9zdDozMDIwL2FwaS9hY2NvdW50cy8ke2FjY291bnRJZH0vZXZlbnRzL2A7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIG1vZGU6IFwiY29yc1wiLFxuICAgICAgY2FjaGU6IFwibm8tY2FjaGVcIixcbiAgICAgIGNyZWRlbnRpYWxzOiBcInNhbWUtb3JpZ2luXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZixcbiAgICAgICAgZXZlbnQ6IG1lc3NhZ2UsXG4gICAgICAgIC8vIFRPRE86IHRlc3Qgc2V0IGlkIHNob3VsZCBiZSBzZXQgd2hlbiBjcmVhdGluZy9sb2FkaW5nIHRlc3RzZXQgaW4gdGhlIHJ1bm5lclxuICAgICAgICBwbGFjZWhvbGRlcjogbnVsbCxcbiAgICAgIH0pLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKVxuICB9O1xuXG4gIGNoZWNrRm9yRXhpc3RpbmdUZXN0ID0gYXN5bmMgKGZpbGVwYXRoOiBzdHJpbmcpID0+IHtcbiAgICBsZXQgYWNjb3VudElkID0gKHdpbmRvdyBhcyB7IFtrZXk6IHN0cmluZ106IGFueSB9KVtcImRhdGFMYXllclwiXVswXVtcImFwaUtleVwiXTtcblxuICAgIC8vIHJhdGhlciBnZXQgYSA0MDMgdGhhbiBhIGJhZCByb3V0ZVxuICAgIGlmICghYWNjb3VudElkKSB7XG4gICAgICBhY2NvdW50SWQgPSAxO1xuICAgIH1cblxuICAgIGNvbnN0IHVyaUZpbGVwYXRoID0gZW5jb2RlVVJJKGZpbGVwYXRoKVxuICAgIGNvbnN0IHVybCA9IGAvL2xvY2FsaG9zdDozMDIwL2FwaS9hY2NvdW50cy8ke2FjY291bnRJZH0vZXZlbnRzLz9maWxlcGF0aD0ke3VyaUZpbGVwYXRofWA7XG5cbiAgICBjb25zb2xlLmxvZygndXJsIGhpdDogJywgdXJsLCB1cmlGaWxlcGF0aClcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgbW9kZTogXCJjb3JzXCIsXG4gICAgICBjYWNoZTogXCJuby1jYWNoZVwiLFxuICAgICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXG4gIH07XG59XG5cbig8YW55PndpbmRvdykuZXZlbnRSZWNvcmRlciA9IG5ldyBBc3NlcnRseUNsaWVudCgpO1xuKDxhbnk+d2luZG93KS5ldmVudFJlY29yZGVyLnN0YXJ0KCk7XG5cbiIsImltcG9ydCBDb29yZGluYXRlcyBmcm9tIFwiLi90eXBlcy9Db29yZGluYXRlc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29tcG9uZW50SW5mbyhjb21wb25lbnQ6IGFueSwgbWF4TmVzdDogbnVtYmVyLCByZXN1bHRBcnJheTogYW55KTogYW55IHtcbiAgY29uc29sZS5sb2coJ2dldENvbXBvbmVudEluZm86ICcsIGNvbXBvbmVudCwgcmVzdWx0QXJyYXkpXG5cbiAgaWYgKCFjb21wb25lbnQgfHwgbWF4TmVzdCA9PT0gMCkge1xuICAgIC8vIGNvbnNvbGUubG9nKCdyZXN1bHRBcnJheTogJywgcmVzdWx0QXJyYXkpXG4gICAgcmV0dXJuIHJlc3VsdEFycmF5XG4gIH1cblxuICBpZiAoY29tcG9uZW50Py5fZGVidWdTb3VyY2U/LmZpbGVOYW1lKSB7XG4gICAgLy8gdGhlIG93bmVyIG9mIHRoZSBub2RlIHdoZXJlIHRoZSAnc291cmNlJyBmaWxlbmFtZSBleGlzdHMgaXMgdGhlIGZpbGUgdGhhdCB5b3Ugd2FudCB0aGUgcHJvcHMgZm9yIFxuICAgIGNvbnN0IHByb3BzID0gZ2V0Q29tcG9uZW50UHJvcHMoY29tcG9uZW50Py5fZGVidWdPd25lcilcbiAgICBjb25zdCBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShjb21wb25lbnQ/Ll9kZWJ1Z093bmVyKVxuICAgIHJlc3VsdEFycmF5LnB1c2goe1xuICAgICAgZmlsZW5hbWU6IGNvbXBvbmVudD8uX2RlYnVnU291cmNlPy5maWxlTmFtZSwgXG4gICAgICAvLyB0aGUgbGluZSBudW1iZXIgaXMgcmVhbGx5IGZvciB0aGUgbmV4dCBjb21wb25lbnQgZG93biBpbiB0aGUgdHJlZSB0aGF0IGlzIGJlaW5nIGNhbGxlZCBmcm9tIHRoZSAnZmlsZW5hbWUnXG4gICAgICBsaW5lbnVtYmVyOiBjb21wb25lbnQ/Ll9kZWJ1Z1NvdXJjZT8ubGluZU51bWJlciwgXG4gICAgICBwcm9wczogcHJvcHMsIFxuICAgICAgLy8gaWYgaXQncyBjb21wb25lbnQgIHN0ci5zcGxpdCgnXFxcXCcpLnBvcC5zcGxpdChgL2ApLnBvcCgpLnNwbGl0KCcuJylbMF1cbiAgICAgIGNvbXBvbmVudE5hbWU6IG5hbWUgPT09ICdDb21wb25lbnQnID8gXG4gICAgICAgIGNvbXBvbmVudD8uX2RlYnVnU291cmNlPy5maWxlTmFtZT8uc3BsaXQoJ1xcXFwnKS5wb3AoKS5zcGxpdChgL2ApLnBvcCgpLnNwbGl0KCcuJylbMF0gOiBuYW1lXG4gICAgfSlcbiAgICByZXR1cm4gZ2V0Q29tcG9uZW50SW5mbyhjb21wb25lbnQ/Ll9kZWJ1Z093bmVyLG1heE5lc3QtMSxyZXN1bHRBcnJheSlcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZ2V0Q29tcG9uZW50SW5mbyhjb21wb25lbnQ/Ll9kZWJ1Z093bmVyLG1heE5lc3QtMSxyZXN1bHRBcnJheSlcbiAgfVxuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21wb25lbnRQcm9wcyhjb21wb25lbnQ6IGFueSwgcHJvcHMgPSB7fSk6IGFueSB7XG4gIGlmICghY29tcG9uZW50KSB7XG4gICAgZnVuY3Rpb25TdHJpbmdpZnkocHJvcHMpO1xuICAgIHJldHVybiBwcm9wcztcbiAgfVxuXG4gIGNvbnN0IG5ld1Byb3BzID0gY29tcG9uZW50LnBlbmRpbmdQcm9wc1xuICAgID8geyAuLi5wcm9wcywgLi4uY29tcG9uZW50LnBlbmRpbmdQcm9wcyB9XG4gICAgOiBwcm9wcztcbiAgZGVsZXRlIG5ld1Byb3BzLmNoaWxkcmVuO1xuXG4gIGlmIChcbiAgICBjb21wb25lbnQ/LnR5cGU/Ll9fcHJvdG9fXyAmJlxuICAgIFtcIkNvbXBvbmVudFwiLCBcIlB1cmVDb21wb25lbnRcIl0uaW5jbHVkZXMoY29tcG9uZW50LnR5cGUuX19wcm90b19fLm5hbWUpXG4gICkge1xuICAgIGZ1bmN0aW9uU3RyaW5naWZ5KG5ld1Byb3BzKTtcbiAgICByZXR1cm4gbmV3UHJvcHM7XG4gIH1cblxuICByZXR1cm4gZ2V0Q29tcG9uZW50UHJvcHMoY29tcG9uZW50Ll9kZWJ1Z093bmVyLCBuZXdQcm9wcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21wb25lbnROYW1lKGZpYmVyOiBhbnkpOiBhbnkge1xuICBpZiAoIWZpYmVyKSByZXR1cm4gbnVsbDtcblxuICBpZiAoZmliZXIuZWxlbWVudFR5cGUgJiYgZmliZXIuZWxlbWVudFR5cGUubmFtZSkge1xuICAgIHJldHVybiBmaWJlci5lbGVtZW50VHlwZS5uYW1lO1xuICB9XG5cbiAgaWYgKGZpYmVyLmVsZW1lbnRUeXBlICYmIGZpYmVyLmVsZW1lbnRUeXBlLmRpc3BsYXlOYW1lKSB7XG4gICAgcmV0dXJuIGZpYmVyLmVsZW1lbnRUeXBlLmRpc3BsYXlOYW1lO1xuICB9XG5cbiAgaWYgKGZpYmVyLnR5cGUuZGlzcGxheU5hbWUpIHtcbiAgICByZXR1cm4gZmliZXIudHlwZS5kaXNwbGF5TmFtZTtcbiAgfVxuXG4gIGlmIChmaWJlci50eXBlLm5hbWUpIHtcbiAgICByZXR1cm4gZmliZXIudHlwZS5uYW1lO1xuICB9XG4gIHJldHVybiBnZXRDb21wb25lbnROYW1lKGZpYmVyLl9kZWJ1Z093bmVyKTtcbn1cblxuY29uc3QgZXZlbnRzV2l0aENvb3JkaW5hdGVzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ID0ge1xuICBtb3VzZXVwOiB0cnVlLFxuICBtb3VzZWRvd246IHRydWUsXG4gIG1vdXNlbW92ZTogdHJ1ZSxcbiAgbW91c2VvdmVyOiB0cnVlLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvb3JkaW5hdGVzKGV2ZW50OiBFdmVudCk6IENvb3JkaW5hdGVzIHwgbnVsbCB7XG4gIGNvbnN0IG1vdXNlRXZlbnQgPSBldmVudCBhcyBNb3VzZUV2ZW50O1xuXG4gIHJldHVybiBldmVudHNXaXRoQ29vcmRpbmF0ZXNbZXZlbnQudHlwZV1cbiAgICA/IHsgeDogbW91c2VFdmVudC5jbGllbnRYLCB5OiBtb3VzZUV2ZW50LmNsaWVudFkgfVxuICAgIDogbnVsbDtcbn1cblxuLy8gbWFwIHJlYWN0IGNsYXNzZXMgdG8gZG9tIGVsZW1lbnRzXG5leHBvcnQgZnVuY3Rpb24gZmluZFJlYWN0RWxlbWVudERVUktBKHRhcmdldDogRXZlbnRUYXJnZXQpOiBhbnkge1xuICAvLyBjb25zb2xlLmRpcih0YXJnZXQpXG4gIGNvbnN0IGtleSA9IE9iamVjdC5rZXlzKHRhcmdldCkuZmluZCgoa2V5KSA9PlxuICAgIGtleS5zdGFydHNXaXRoKFwiX19yZWFjdEludGVybmFsSW5zdGFuY2UkXCIpXG4gICk7XG4gIC8vIGNvbnNvbGUubG9nKCdrZXk6ICcsIGtleSlcbiAgLy8gY3JlYXRlcyBhbiBvYmplY3Qgb3V0IG9mIHRoZSB0YXJnZXQgcGFzc2VkXG4gIGNvbnN0IHRhcmdldE1hcCA9IHRhcmdldCBhcyB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuXG4gIGNvbnN0IGludGVybmFsSW5zdGFuY2UgPSBrZXkgPyB0YXJnZXRNYXBba2V5XSA6IG51bGw7XG4gIC8vIGNvbnNvbGUubG9nKCdSZWFjdCBOb2RlIGlmIEZvdW5kOiAnLCBpbnRlcm5hbEluc3RhbmNlKVxuICBpZiAoaW50ZXJuYWxJbnN0YW5jZSA9PSBudWxsKSByZXR1cm4gbnVsbDtcblxuICAvLyBjb25zb2xlLmxvZygnaW50ZXJuYWxJbnN0YW5jZTI6ICcsIGludGVybmFsSW5zdGFuY2UpXG4gIC8vIHJldHVybiBpbnRlcm5hbEluc3RhbmNlLl9kZWJ1Z093bmVyXG4gIC8vICAgPyBpbnRlcm5hbEluc3RhbmNlLl9kZWJ1Z093bmVyLnN0YXRlTm9kZVxuICAvLyAgIDogaW50ZXJuYWxJbnN0YW5jZS5yZXR1cm4uc3RhdGVOb2RlO1xuXG4gIHJldHVybiBpbnRlcm5hbEluc3RhbmNlO1xuXG4gIC8vIGZvciAobGV0IGtleTogc3RyaW5nIGluIHRhcmdldCkge1xuICAvLyAgIGlmIChrZXkuc3RhcnRzV2l0aChcIl9fcmVhY3RJbnRlcm5hbEluc3RhbmNlJFwiKSkge1xuICAvLyAgICAgLy8gY29uc29sZS5sb2coJ2tleXMgaW4gdGhlIGZpbmQgUmVhY3RFbGVtZW50JywgdGFyZ2V0W2tleV0pXG4gIC8vICAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gIC8vICAgfVxuICAvLyB9XG4gIC8vIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFJlYWN0RWxlbWVudCh0YXJnZXQ6IEV2ZW50VGFyZ2V0KTogYW55IHtcbiAgLy8gY29uc3Qga2V5ID0gT2JqZWN0LmtleXModGFyZ2V0KS5maW5kKChrZXkpID0+XG4gIC8vICAga2V5LnN0YXJ0c1dpdGgoXCJfX3JlYWN0SW50ZXJuYWxJbnN0YW5jZSRcIilcbiAgLy8gKTtcbiAgY29uc3QgdGFyZ2V0TWFwID0gdGFyZ2V0IGFzIHsgW2tleTogc3RyaW5nXTogYW55IH07XG4gIC8vIGNvbnN0IGludGVybmFsSW5zdGFuY2UgPSBrZXkgPyB0YXJnZXRNYXBba2V5XSA6IG51bGw7XG4gIC8vIGlmIChpbnRlcm5hbEluc3RhbmNlID09IG51bGwpIHJldHVybiBudWxsO1xuICAvLyByZXR1cm4gaW50ZXJuYWxJbnN0YW5jZS5fZGVidWdPd25lclxuICAvLyAgID8gaW50ZXJuYWxJbnN0YW5jZS5fZGVidWdPd25lci5zdGF0ZU5vZGVcbiAgLy8gICA6IGludGVybmFsSW5zdGFuY2UucmV0dXJuLnN0YXRlTm9kZTtcbiAgZm9yIChsZXQga2V5IGluIHRhcmdldE1hcCkge1xuICAgIGlmIChrZXkuc3RhcnRzV2l0aChcIl9fcmVhY3RJbnRlcm5hbEluc3RhbmNlJFwiKSkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ2tleXMgaW4gdGhlIGZpbmQgUmVhY3RFbGVtZW50JywgdGFyZ2V0W2tleV0pXG4gICAgICByZXR1cm4gdGFyZ2V0TWFwW2tleV07XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBmdW5jdGlvblN0cmluZ2lmeShvYmo6IGFueSk6IHZvaWQge1xuICBmb3IgKGxldCBrIGluIG9iaikge1xuICAgIGlmIChvYmpba10gJiYge30udG9TdHJpbmcuY2FsbChvYmpba10pID09PSBcIltvYmplY3QgRnVuY3Rpb25dXCIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIG9ialtrXSA9IFwiXCIgKyBvYmpba107XG4gICAgICAgIC8vIC8vIGdldCByaWQgb2YgdGhlIGV4dHJhIGxpbmUgbWFya2Vyc1xuICAgICAgICAvLyBvYmpba10gPSBvYmpba10ucmVwbGFjZSgvKFxcclxcbnxcXG58XFxyKS9nbSwgXCJcIik7XG4gICAgICAgIG9ialtrXSA9IFwiW0Z1bmN0aW9uXVwiXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzdHJpbmdpZnlpbmcgcHJvcFwiLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgc3RyaXBFeHRyYUNvbXBvbmVudFByb3BzKG9iaik7XG59XG5cblxuXG5mdW5jdGlvbiBzdHJpcEV4dHJhQ29tcG9uZW50UHJvcHMocHJvcHM6IGFueSk6IHZvaWQge1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocHJvcHMpO1xuICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgaWYgKFxuICAgICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb3BzW2tleV0pID09PSBcIltvYmplY3QgT2JqZWN0XVwiICYmXG4gICAgICAocHJvcHNba2V5XS5oYXNPd25Qcm9wZXJ0eShcIl9vd25lclwiKSB8fFxuICAgICAgICBrZXkgPT09IFwiaW5wdXRSZWZcIiB8fFxuICAgICAgICBrZXkgPT09IFwiSW5wdXRQcm9wc1wiKVxuICAgICkge1xuICAgICAgZGVsZXRlIHByb3BzW2tleV07XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBFdmVudFR5cGUsIFJlY29uY2lsZVR5cGUgfSBmcm9tIFwiLi90eXBlcy9FdmVudFR5cGVcIjtcbmltcG9ydCB7IFJlY29yZGVyQ29uZmlnIH0gZnJvbSBcIi4vdHlwZXMvUmVjb3JkZXJDb25maWdcIjtcblxuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgV2luZG93IHtcbiAgICByZWNvcmRlckFkZGVkQ29udHJvbExpc3RlbmVyczogYm9vbGVhbjtcbiAgICBkYXRhTGF5ZXI6IGFueVtdO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV2ZW50UmVjb3JkZXIge1xuICBwcml2YXRlIGV2ZW50Q2FsbGJhY2s6IChldmVudDogRXZlbnQpID0+IGFueTtcbiAgcHJpdmF0ZSByZWNvbmNpbGVDYWxsYmFjazogKGV2ZW50OiBFdmVudCkgPT4gYW55O1xuICBwcml2YXRlIHJlY29yZEV2ZW50czogRXZlbnRUeXBlW10gPSBbXTtcbiAgcHJpdmF0ZSByZWNvbmNpbGVFdmVudHM6IFJlY29uY2lsZVR5cGVbXSA9IFtcImJsdXJcIiwgXCJmb2N1c1wiLCBcImNoYW5nZVwiXTtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IFJlY29yZGVyQ29uZmlnKSB7XG4gICAgY29uc3Qge1xuICAgICAgZXZlbnRDYWxsYmFjayxcbiAgICAgIHJlY29uY2lsZUNhbGxiYWNrLFxuICAgICAgcmVjb3JkRXZlbnRzLFxuICAgICAgcmVjb25jaWxlRXZlbnRzID0gbnVsbCxcbiAgICB9ID0gY29uZmlnO1xuICAgIHRoaXMuZXZlbnRDYWxsYmFjayA9IGV2ZW50Q2FsbGJhY2s7XG4gICAgdGhpcy5yZWNvbmNpbGVDYWxsYmFjayA9IHJlY29uY2lsZUNhbGxiYWNrO1xuICAgIHRoaXMucmVjb3JkRXZlbnRzID0gcmVjb3JkRXZlbnRzO1xuICAgIGlmIChyZWNvbmNpbGVFdmVudHMpIHtcbiAgICAgIHRoaXMucmVjb25jaWxlRXZlbnRzID0gcmVjb25jaWxlRXZlbnRzO1xuICAgIH1cbiAgfVxuXG4gIGFkZEFsbExpc3RlbmVycyA9ICgpID0+IHtcbiAgICB0aGlzLnJlY29yZEV2ZW50cy5mb3JFYWNoKChldmVudCkgPT4ge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIHRoaXMuZXZlbnRDYWxsYmFjaywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnJlY29uY2lsZUV2ZW50cy5mb3JFYWNoKChldmVudCkgPT4ge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIHRoaXMucmVjb25jaWxlQ2FsbGJhY2ssIHRydWUpO1xuICAgIH0pO1xuICB9O1xuXG4gIHJlbW92ZUFsbExpc3RlbmVycyA9ICgpID0+IHtcbiAgICB0aGlzLnJlY29yZEV2ZW50cy5mb3JFYWNoKChldmVudCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIHRoaXMuZXZlbnRDYWxsYmFjaywgdHJ1ZSk7XG4gICAgfSk7XG4gICAgdGhpcy5yZWNvbmNpbGVFdmVudHMuZm9yRWFjaCgoZXZlbnQ6IFJlY29uY2lsZVR5cGUpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCB0aGlzLnJlY29uY2lsZUNhbGxiYWNrLCB0cnVlKTtcbiAgICB9KTtcbiAgfTtcblxuICBzdGFydCA9ICgpID0+IHtcbiAgICBpZiAoIXdpbmRvdy5yZWNvcmRlckFkZGVkQ29udHJvbExpc3RlbmVycykge1xuICAgICAgdGhpcy5hZGRBbGxMaXN0ZW5lcnMoKTtcbiAgICAgIHdpbmRvdy5yZWNvcmRlckFkZGVkQ29udHJvbExpc3RlbmVycyA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIHN0b3AgPSAoKSA9PiB7XG4gICAgaWYgKHdpbmRvdy5yZWNvcmRlckFkZGVkQ29udHJvbExpc3RlbmVycykge1xuICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgIHdpbmRvdy5yZWNvcmRlckFkZGVkQ29udHJvbExpc3RlbmVycyA9IGZhbHNlO1xuICAgIH1cbiAgfTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=